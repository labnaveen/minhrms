import{C as We,O as H,r as i,u as Ut,P as Vt,a as Wt,c as Jt,d as Fe,f as Z,D as y,U as Xt,I as J,aT as Ke,R as ue,A as qt,v as Je,aU as Xe,G as b,j as u,aV as te,aW as qe}from"./index-3ec7abe5.js";import{a as Gt,C as Ge}from"./calendar.esm-f987a87a.js";import{a as Yt,D as Ye,C as be}from"./dropdown.esm-1ad10373.js";import{B as Qe}from"./index-36dd5a0c.js";import{L as ae}from"./index-37ade0e2.js";import{f as Ze,a as Qt,e as Zt,b as zt,c as ea}from"./api-d328eb9f.js";import{T as ze}from"./index-b2a6305f.js";import{C as M}from"./index-3d6f48ca.js";import{u as et}from"./useDispatch-1aeda00f.js";import"./index.esm-9e3aa09b.js";import"./index.esm-be3d6ae7.js";import"./inputtext.esm-e49a03d7.js";import"./paginator.esm-634e02d4.js";function fe(n,a){(a==null||a>n.length)&&(a=n.length);for(var r=0,c=new Array(a);r<a;r++)c[r]=n[r];return c}function ta(n){if(Array.isArray(n))return fe(n)}function aa(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tt(n,a){if(n){if(typeof n=="string")return fe(n,a);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(n,a)}}function na(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ra(n){return ta(n)||aa(n)||tt(n)||na()}function q(n){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},q(n)}function oa(n,a){if(q(n)!=="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var c=r.call(n,a||"default");if(q(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function la(n){var a=oa(n,"string");return q(a)==="symbol"?a:String(a)}function at(n,a,r){return a=la(a),a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n}function sa(n){if(Array.isArray(n))return n}function ia(n,a){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var c,l,f,h,m=[],v=!0,C=!1;try{if(f=(r=r.call(n)).next,a===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(c=f.call(r)).done)&&(m.push(c.value),m.length!==a);v=!0);}catch(N){C=!0,l=N}finally{try{if(!v&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(C)throw l}}return m}}function ca(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(n,a){return sa(n)||ia(n,a)||tt(n,a)||ca()}function Ue(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);a&&(c=c.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,c)}return r}function z(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ue(Object(r),!0).forEach(function(c){at(n,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(r,c))})}return n}var da={navcontent:"p-tabview-nav-content",nav:"p-tabview-nav",inkbar:"p-tabview-ink-bar",panelcontainer:function(a){var r=a.props;return Z("p-tabview-panels",r.panelContainerClassName)},prevbutton:"p-tabview-nav-prev p-tabview-nav-btn p-link",nextbutton:"p-tabview-nav-next p-tabview-nav-btn p-link",root:function(a){var r=a.props;return Z("p-tabview p-component",{"p-tabview-scrollable":r.scrollable},r.className)},navcontainer:"p-tabview-nav-container",tab:{header:function(a){var r=a.selected,c=a.disabled,l=a.headerClassName,f=a._className;return Z("p-unselectable-text",{"p-tabview-selected p-highlight":r,"p-disabled":c},l,f)},headertitle:"p-tabview-title",headeraction:"p-tabview-nav-link",content:function(a){var r=a.props,c=a.selected,l=a.getTabProp,f=a.tab,h=a.isSelected,m=a.shouldUseTab,v=a.index;return m(f,v)&&(!r.renderActiveOnly||h(v))?Z(l(f,"contentClassName"),l(f,"className"),"p-tabview-panel",{"p-hidden":!c}):void 0}}},ua=`
@layer primereact {
    .p-tabview-nav-container {
        position: relative;
    }
    
    .p-tabview-scrollable .p-tabview-nav-container {
        overflow: hidden;
    }
    
    .p-tabview-nav-content {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
        position: relative;
    }
    
    .p-tabview-nav {
        display: flex;
        margin: 0;
        padding: 0;
        list-style-type: none;
        flex: 1 1 auto;
    }
    
    .p-tabview-nav-link {
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        position: relative;
        text-decoration: none;
        overflow: hidden;
    }
    
    .p-tabview-ink-bar {
        display: none;
        z-index: 1;
    }
    
    .p-tabview-nav-link:focus {
        z-index: 1;
    }
    
    .p-tabview-close {
        z-index: 1;
    }
    
    .p-tabview-title {
        line-height: 1;
        white-space: nowrap;
    }
    
    .p-tabview-nav-btn {
        position: absolute;
        top: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .p-tabview-nav-prev {
        left: 0;
    }
    
    .p-tabview-nav-next {
        right: 0;
    }
    
    .p-tabview-nav-content::-webkit-scrollbar {
        display: none;
    }
}
`,pa={tab:{header:function(a){var r=a.headerStyle,c=a._style;return z(z({},r||{}),c||{})},content:function(a){var r=a.props,c=a.getTabProp,l=a.tab,f=a.isSelected,h=a.shouldUseTab,m=a.index;return h(l,m)&&(!r.renderActiveOnly||f(m))?z(z({},c(l,"contentStyle")||{}),c(l,"style")||{}):void 0}}},ee=We.extend({defaultProps:{__TYPE:"TabView",id:null,activeIndex:0,className:null,onBeforeTabChange:null,onBeforeTabClose:null,onTabChange:null,onTabClose:null,panelContainerClassName:null,panelContainerStyle:null,renderActiveOnly:!0,scrollable:!1,style:null,children:void 0},css:{classes:da,styles:ua,inlineStyles:pa}}),$=We.extend({defaultProps:{__TYPE:"TabPanel",className:null,closable:!1,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,leftIcon:null,rightIcon:null,prevButton:null,nextButton:null,closeIcon:null,style:null,children:void 0},getCProp:function(a,r){return H.getComponentProp(a,r,$.defaultProps)},getCProps:function(a){return H.getComponentProps(a,$.defaultProps)},getCOtherProps:function(a){return H.getComponentDiffProps(a,$.defaultProps)}});function Ve(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);a&&(c=c.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,c)}return r}function pe(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ve(Object(r),!0).forEach(function(c){at(n,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(r,c))})}return n}var me=function(){},nt=i.forwardRef(function(n,a){var r=Ut(),c=i.useContext(Vt),l=ee.getProps(n,c),f=i.useState(l.id),h=X(f,2),m=h[0],v=h[1],C=i.useState(!0),N=X(C,2),I=N[0],O=N[1],F=i.useState(!1),k=X(F,2),R=k[0],e=k[1],A=i.useState([]),T=X(A,2),g=T[0],D=T[1],rt=i.useState(l.activeIndex),he=X(rt,2),G=he[0],ye=he[1],ve=i.useRef(null),P=i.useRef(null),Y=i.useRef(null),ne=i.useRef(null),ge=i.useRef(null),we=i.useRef(null),re=i.useRef({}),oe=l.onTabChange?l.activeIndex:G,xe=i.Children.count(l.children),Ce={props:l,state:{id:m,isPrevButtonDisabled:I,isNextButtonDisabled:R,hiddenTabsState:g,activeIndex:G}},K=ee.setMetaData(pe({},Ce)),w=K.ptm,ot=K.ptmo,_=K.cx,_e=K.sx,lt=K.isUnstyled;Wt(ee.css.styles,lt,{name:"tabview"});var L=function(t,o,s){var d={props:t.props,parent:Ce,context:{index:s,count:xe,first:s===0,last:s===xe-1,active:s==G,disabled:E(t,"disabled")}};return r(w("tab.".concat(o),{tab:d}),w("tabpanel.".concat(o),{tabpanel:d}),w("tabpanel.".concat(o),d),ot(E(t,"pt"),o,d))},U=function(t){return t===oe},E=function(t,o){return $.getCProp(t,o)},V=function(t){return t&&H.isValidChild(t,"TabPanel")&&g.every(function(o){return o!==t.key})},st=function(t){var o=i.Children.map(l.children,function(s,d){if(V(s))return{tab:s,index:d}});return o.find(function(s){var d=s.tab,S=s.index;return!E(d,"disabled")&&S>=t})||o.reverse().find(function(s){var d=s.tab,S=s.index;return!E(d,"disabled")&&t>S})},Se=function(t,o){t.preventDefault();var s=l.onBeforeTabClose,d=l.onTabClose,S=l.children,j=S[o].key;s&&s({originalEvent:t,index:o})===!1||(D([].concat(ra(g),[j])),d&&d({originalEvent:t,index:o}))},le=function(t,o,s){Ne(t,o,s)},Ne=function(t,o,s){if(t&&t.preventDefault(),!E(o,"disabled")){if(l.onBeforeTabChange&&l.onBeforeTabChange({originalEvent:t,index:s})===!1)return;l.onTabChange?l.onTabChange({originalEvent:t,index:s}):ye(s)}W({index:s})},Pe=function(t,o,s){switch(t.code){case"ArrowLeft":ct(t);break;case"ArrowRight":it(t);break;case"Home":Ee(t);break;case"End":Te(t);break;case"PageDown":dt(t);break;case"PageUp":ut(t);break;case"Enter":case"Space":pt(t,o,s);break}},it=function(t){var o=De(t.target.parentElement);o?Q(o):Ee(t),t.preventDefault()},ct=function(t){var o=Ae(t.target.parentElement);o?Q(o):Te(t),t.preventDefault()},Ee=function(t){var o=ft();Q(o),t.preventDefault()},Te=function(t){var o=mt();Q(o),t.preventDefault()},dt=function(t){W({index:i.Children.count(l.children)-1}),t.preventDefault()},ut=function(t){W({index:0}),t.preventDefault()},pt=function(t,o,s){Ne(t,o,s),t.preventDefault()},De=function p(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=o?t:t.nextElementSibling;return s?y.getAttribute(s,"data-p-disabled")||y.getAttribute(s,"data-pc-section")==="inkbar"?p(s):y.findSingle(s,'[data-pc-section="headeraction"]'):null},Ae=function p(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=o?t:t.previousElementSibling;return s?y.getAttribute(s,"data-p-disabled")||y.getAttribute(s,"data-pc-section")==="inkbar"?p(s):y.findSingle(s,'[data-pc-section="headeraction"]'):null},ft=function(){return De(Y.current.firstElementChild,!0)},mt=function(){return Ae(Y.current.lastElementChild,!0)},Q=function(t){t&&(y.focus(t),W({element:t}))},bt=function(){var t=re.current["tab_".concat(oe)];ne.current.style.width=y.getWidth(t)+"px",ne.current.style.left=y.getOffset(t).left-y.getOffset(Y.current).left+"px"},W=function(t){var o=t.index,s=t.element,d=s||re.current["tab_".concat(o)];d&&d.scrollIntoView&&d.scrollIntoView({block:"nearest"})},je=function(){var t=P.current,o=t.scrollLeft,s=t.scrollWidth,d=y.getWidth(P.current);O(o===0),e(o===s-d)},ht=function(t){l.scrollable&&je(),t.preventDefault()},Ie=function(){return[ge.current,we.current].reduce(function(t,o){return o?t+y.getWidth(o):t},0)},yt=function(){var t=y.getWidth(P.current)-Ie(),o=P.current.scrollLeft-t;P.current.scrollLeft=o<=0?0:o},vt=function(){var t=y.getWidth(P.current)-Ie(),o=P.current.scrollLeft+t,s=P.current.scrollWidth-t;P.current.scrollLeft=o>=s?s:o},gt=function(){O(!0),e(!1),D([]),l.onTabChange?l.onTabChange({index:oe}):ye(l.activeIndex)};i.useEffect(function(){bt(),je()}),Jt(function(){m||v(Xt())}),Fe(function(){if(H.isNotEmpty(g)){var p=st(g[g.length-1]);p&&le(null,p.tab,p.index)}},[g]),Fe(function(){l.activeIndex!==G&&W({index:l.activeIndex})},[l.activeIndex]),i.useImperativeHandle(a,function(){return{props:l,reset:gt,getElement:function(){return ve.current}}});var wt=function(t,o){var s=U(o),d=$.getCProps(t),S=d.headerStyle,j=d.headerClassName,se=d.style,ie=d.className,ce=d.disabled,Oe=d.leftIcon,ke=d.rightIcon,It=d.header,Re=d.headerTemplate,Ot=d.closable,kt=d.closeIcon,Rt=m+"_header_"+o,Le=m+o+"_content",Lt=ce||!s?-1:0,Be=Oe&&J.getJSXIcon(Oe,void 0,{props:l}),Bt=r({className:_("tab.headertitle")},L(t,"headertitle",o)),He=i.createElement("span",Bt,It),Me=ke&&J.getJSXIcon(ke,void 0,{props:l}),$e="p-tabview-close",Ht=kt||i.createElement(qt,{className:$e,onClick:function(x){return Se(x,o)}}),Mt=Ot?J.getJSXIcon(Ht,{className:$e,onClick:function(x){return Se(x,o)}},{props:l}):null,$t=r({id:Rt,role:"tab",className:_("tab.headeraction"),tabIndex:Lt,"aria-controls":Le,"aria-selected":s,"aria-disabled":ce,onClick:function(x){return le(x,t,o)},onKeyDown:function(x){return Pe(x,t,o)}},L(t,"headeraction",o)),de=i.createElement("a",$t,Be,He,Me,Mt,i.createElement(ue,null));if(Re){var Ft={className:"p-tabview-nav-link",titleClassName:"p-tabview-title",onClick:function(x){return le(x,t,o)},onKeyDown:function(x){return Pe(x,t,o)},leftIconElement:Be,titleElement:He,rightIconElement:Me,element:de,props:l,index:o,selected:s,ariaControls:Le};de=H.getJSXElement(Re,Ft)}var Kt=r({ref:function(x){return re.current["tab_".concat(o)]=x},className:_("tab.header",{selected:s,disabled:ce,headerClassName:j,_className:ie}),style:_e("tab.header",{headerStyle:S,_style:se}),role:"presentation"},L(t,"root",o),L(t,"header",o));return i.createElement("li",Kt,de)},xt=function(){return i.Children.map(l.children,function(t,o){if(V(t))return wt(t,o)})},Ct=function(){var t=xt(),o=r({id:m,ref:P,className:_("navcontent"),style:l.style,onScroll:ht},w("navcontent")),s=r({ref:Y,className:_("nav"),role:"tablist"},w("nav")),d=r({ref:ne,"aria-hidden":"true",role:"presentation",className:_("inkbar")},w("inkbar"));return i.createElement("div",o,i.createElement("ul",s,t,i.createElement("li",d)))},_t=function(){var t=r({className:_("panelcontainer"),style:l.panelContainerStyle},w("panelcontainer")),o=i.Children.map(l.children,function(s,d){if(V(s)&&(!l.renderActiveOnly||U(d))){var S=U(d),j=m+d+"_content",se=m+"_header_"+d,ie=r({id:j,className:_("tab.content",{props:l,selected:S,getTabProp:E,tab:s,isSelected:U,shouldUseTab:V,index:d}),style:_e("tab.content",{props:l,getTabProp:E,tab:s,isSelected:U,shouldUseTab:V,index:d}),role:"tabpanel","aria-labelledby":se},$.getCOtherProps(s),L(s,"root",d),L(s,"content",d));return i.createElement("div",ie,l.renderActiveOnly?S&&E(s,"children"):E(s,"children"))}});return i.createElement("div",t,o)},St=function(){var t=r({"aria-hidden":"true"},w("previcon")),o=l.prevButton||i.createElement(Gt,t),s=J.getJSXIcon(o,pe({},t),{props:l}),d=r({ref:ge,type:"button",className:_("prevbutton"),"aria-label":Ke("previousPageLabel"),onClick:function(j){return yt()}},w("prevbutton"));return l.scrollable&&!I?i.createElement("button",d,s,i.createElement(ue,null)):null},Nt=function(){var t=r({"aria-hidden":"true"},w("nexticon")),o=l.nextButton||i.createElement(Yt,t),s=J.getJSXIcon(o,pe({},t),{props:l}),d=r({ref:we,type:"button",className:_("nextbutton"),"aria-label":Ke("nextPageLabel"),onClick:function(j){return vt()}},w("nextbutton"));if(l.scrollable&&!R)return i.createElement("button",d,s,i.createElement(ue,null))},Pt=r({id:m,ref:ve,style:l.style,className:_("root")},ee.getOtherProps(l),w("root")),Et=r({className:_("navcontainer")},w("navcontainer")),Tt=Ct(),Dt=_t(),At=St(),jt=Nt();return i.createElement("div",Pt,i.createElement("div",Et,At,Tt,jt),Dt)});me.displayName="TabPanel";nt.displayName="TabView";const fa=({visible:n,onHide:a})=>{const r=et(),c=Je(Xe),l=i.useRef(null),[f,h]=i.useState(b().toDate()),[m,v]=i.useState([]),[C,N]=i.useState(null),I=async()=>{const e=await Ze();v(e.status===200?e.data.data:[])},O=async e=>await Qt({employeeId:C||"",month:b(f).month()+1,year:b(f).year(),page:e.page+1,records:e.rows,sortBy:e.sortField?e.sortField:"",sortOrder:e.sortField?e.sortOrder===-1?"DESC":"ASC":""}),F=async()=>{r(te(!0));const e=await Zt({employeeId:C||"",month:b(f).month()+1,year:b(f).year()});e.status===200&&qe(e.data,f,"Attendance-Logs"),r(te(!1))},k=()=>{a()},R=[{field:"employee_id",header:"Employee ID",body:e=>e.employee_id},{field:"employee_name",header:"Employee Name",body:e=>e.employee_name},{field:"date",header:"Date",body:e=>e.date?b(e.date).format("ddd, DD MMMM yyyy"):"N/A"},{field:"punch_in",header:"First In",body:e=>(e==null?void 0:e.first_in)||"N/A"},{field:"punch_out",header:"Last Out",body:e=>(e==null?void 0:e.last_out)||"N/A"},{field:"status",header:"Status",body:e=>(e==null?void 0:e.status)||"N/A"},{field:"status_remark",header:"Remark",body:e=>(e==null?void 0:e.status_remark)||"N/A"},{field:"hours_worked",header:"Worked Hours",body:e=>(e==null?void 0:e.hours_worked)||"N/A"},{field:"late_in_early_out",header:"Late In/Early Out",body:e=>(e==null?void 0:e.late_in_early_out)||"N/A"},{field:"overtime_hours",header:"OverTime Hours",body:e=>(e==null?void 0:e.overtime_hours)||"N/A"},{field:"deficit_hours",header:"Deficit Hours",body:e=>(e==null?void 0:e.deficit_hours)||"N/A"},{field:"punch_in_location",header:"Punch in location",body:e=>{var A,T,g,D;return e!=null&&e.punch_in_location?`${(A=e==null?void 0:e.punch_in_location)==null?void 0:A.suburb}, ${(T=e==null?void 0:e.punch_in_location)==null?void 0:T.town}, ${(g=e==null?void 0:e.punch_in_location)==null?void 0:g.city}, ${(D=e==null?void 0:e.punch_in_location)==null?void 0:D.state}`:"N/A"}},{field:"punch_out_location",header:"Punch out location",body:e=>{var A,T,g,D;return e!=null&&e.punch_out_location?`${(A=e==null?void 0:e.punch_out_location)==null?void 0:A.suburb}, ${(T=e==null?void 0:e.punch_out_location)==null?void 0:T.town}, ${(g=e==null?void 0:e.punch_out_location)==null?void 0:g.city}, ${(D=e==null?void 0:e.punch_out_location)==null?void 0:D.state}`:"N/A"}}];return i.useEffect(()=>{n&&I()},[n]),u.jsx(Qe,{className:"md:h-[95%] md:w-[95%]",header:"Employee Attendance Logs",visible:n,onHide:k,actions:null,children:u.jsxs("div",{className:"z-0 m-auto grid w-full grid-cols-1 gap-3 md:grid-cols-2",children:[u.jsxs("div",{className:"m-0 grid gap-3 md:col-span-2 md:grid-cols-6",children:[u.jsx(ae,{title:"Select Month",children:u.jsx(Ge,{readOnlyInput:!0,className:"w-full md:!w-fit",maxDate:b().toDate(),placeholder:"Select a month",value:f,onChange:e=>h(e.value),view:"month",dateFormat:"M yy"})}),u.jsx(ae,{title:"Employees",children:u.jsx(Ye,{className:"w-full md:!w-fit",placeholder:"Select an employee",options:m,optionLabel:e=>`${e==null?void 0:e.employee_name} [${e==null?void 0:e.employee_generated_id}]`,optionValue:"id",value:C,filter:!0,onChange:e=>{N(e.value)}})}),u.jsxs("div",{className:"flex justify-center gap-3",children:[u.jsx(M,{className:"h-fit self-end",severity:"danger",icon:"pi pi-times",onClick:()=>{N(""),h(b().toDate()),l.current&&l.current.refreshListData()}}),u.jsx(M,{className:"h-fit self-end",icon:"pi pi-search",onClick:()=>{l.current&&l.current.refreshListData()}})]}),u.jsx(M,{loading:c,className:"h-fit w-full self-end",label:"Export",icon:"pi pi-file-excel",onClick:F})]}),u.jsx(be,{className:"z-50 flex w-full flex-col overflow-hidden md:col-span-2",children:u.jsx(ze,{rowsPerPageOptions:[10,50,100,500],dataHandler:O,id:"employee_attendance_logs",headers:R,ref:l})})]})})},ma=({visible:n,onHide:a})=>{const r=et(),c=Je(Xe),l=i.useRef(null),[f,h]=i.useState(b().toDate()),[m,v]=i.useState([]),[C,N]=i.useState(null),I=async()=>{const e=await Ze();v(e.status===200?e.data.data:[])},O=async e=>await zt({employeeId:C||"",month:b(f).month()+1,year:b(f).year(),page:e.page+1,records:e.rows,sortBy:e.sortField?e.sortField:"",sortOrder:e.sortField?e.sortOrder===-1?"DESC":"ASC":""}),F=async()=>{r(te(!0));const e=await ea({employeeId:C||"",month:b(f).month()+1,year:b(f).year()});e.status===200&&qe(e.data,f,"Leave-Records"),r(te(!1))},k=()=>{a()},R=[{field:"employee_id",header:"Employee ID",body:e=>e.employee_id},{field:"employee_name",header:"Employee Name",body:e=>e.employee_name},{field:"applied_on",header:"Applied On",body:e=>e!=null&&e.applied_on?b(e.applied_on).format("ddd, DD MMMM yyyy"):"N/A"},{field:"applied_for",header:"Leave Type",body:e=>(e==null?void 0:e.leave_applied_for)||"N/A"},{field:"start_date",header:"Start Date",body:e=>e!=null&&e.start_date?b(e.start_date).format("ddd, DD MMMM yyyy"):"N/A"},{field:"end_date",header:"End Date",body:e=>e!=null&&e.end_date?b(e.end_date).format("ddd, DD MMMM yyyy"):"N/A"},{field:"no_of_days",header:"Total Days",body:e=>(e==null?void 0:e.leave_applied_for)||"N/A"},{field:"request_status",header:"Status",body:e=>(e==null?void 0:e.request_status)||"N/A"}];return i.useEffect(()=>{n&&I()},[n]),u.jsx(Qe,{className:"md:h-[95%] md:w-[95%]",header:"Employee Leave Records",visible:n,onHide:k,actions:null,children:u.jsxs("div",{className:"z-0 m-auto grid w-full grid-cols-1 gap-3 md:grid-cols-2",children:[u.jsxs("div",{className:"m-0 grid gap-3 md:col-span-2 md:grid-cols-6",children:[u.jsx(ae,{title:"Select Month",children:u.jsx(Ge,{className:"w-full md:!w-fit",readOnlyInput:!0,maxDate:b().toDate(),placeholder:"Select a month",value:f,onChange:e=>h(e.value),view:"month",dateFormat:"M yy"})}),u.jsx(ae,{title:"Employees",children:u.jsx(Ye,{className:"w-full md:!w-fit",placeholder:"Select an employee",options:m,optionLabel:e=>`${e==null?void 0:e.employee_name} [${e==null?void 0:e.employee_generated_id}]`,optionValue:"id",value:C,filter:!0,onChange:e=>{N(e.value)}})}),u.jsxs("div",{className:"flex justify-center gap-3",children:[u.jsx(M,{className:"h-fit self-end",severity:"danger",icon:"pi pi-times",onClick:()=>{N(""),h(b().toDate()),l.current&&l.current.refreshListData()}}),u.jsx(M,{className:"h-fit self-end",icon:"pi pi-search",onClick:()=>{l.current&&l.current.refreshListData()}})]}),u.jsx(M,{loading:c,className:"h-fit w-full self-end",label:"Export",icon:"pi pi-file-excel",onClick:F})]}),u.jsx(be,{className:"z-50 flex w-full flex-col overflow-hidden md:col-span-2",children:u.jsx(ze,{rowsPerPageOptions:[10,50,100,500],dataHandler:O,id:"employee_attendance_logs",headers:R,ref:l})})]})})},Ta=()=>{const[n,a]=i.useState(!1),[r,c]=i.useState(!1);return u.jsx("div",{className:"flex w-full",children:u.jsxs(be,{className:"h-full",children:[u.jsxs(nt,{className:"w-full overflow-hidden rounded-lg",children:[u.jsx(me,{pt:{headerAction:{className:"focus:shadow-none p-3 text-sm"}},header:"Attendance",children:u.jsx("div",{className:"m-0 grid h-full w-full gap-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6",children:u.jsxs("div",{className:"border-1 flex h-full w-full flex-col rounded-lg border-[#D9D9D9] bg-[#f8f9fa] p-3 shadow-lg",children:[u.jsxs("div",{className:"flex w-full justify-between",children:[u.jsx("p",{className:"text-sm font-bold",children:"Attendance Logs"}),u.jsx("i",{className:"pi pi-arrow-circle-right cursor-pointer",onClick:()=>a(!0)})]}),u.jsx("p",{className:"text-xs",children:"Get the attendance logs for all the employees in your organisation"})]})})}),u.jsx(me,{pt:{headerAction:{className:"focus:shadow-none p-3 text-sm"}},header:"Leaves",children:u.jsx("div",{className:"m-0 grid h-full w-full gap-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6",children:u.jsxs("div",{className:"border-1 flex h-full w-full flex-col rounded-lg border-[#D9D9D9] bg-[#f8f9fa] p-3 shadow-lg",children:[u.jsxs("div",{className:"flex w-full justify-between",children:[u.jsx("p",{className:"text-sm font-bold",children:"Leave Records"}),u.jsx("i",{className:"pi pi-arrow-circle-right cursor-pointer",onClick:()=>c(!0)})]}),u.jsx("p",{className:"text-xs",children:"Get the leave records for all the employees in your organisation"})]})})})]}),u.jsx(fa,{visible:n,onHide:()=>a(!1)}),u.jsx(ma,{visible:r,onHide:()=>c(!1)})]})})};export{Ta as AdminReports,Ta as default};
