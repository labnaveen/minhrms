import{r as o,j as s,x as f,af as m,aE as u,G as p,aF as x,$ as h}from"./index-3ec7abe5.js";import{C as b,D as j}from"./dropdown.esm-1ad10373.js";import{T as N}from"./index-b2a6305f.js";import{C as i}from"./index-3d6f48ca.js";import"./index.esm-9e3aa09b.js";import"./paginator.esm-634e02d4.js";import"./inputtext.esm-e49a03d7.js";const k=()=>{const a=o.useRef(null),[r,t]=o.useState(""),c=async()=>{const e=async()=>{const l=await x();l.status===200&&(h.success(l.message),a.current.refreshListData(),setTimeout(()=>{location.reload()},1e3))};return m({draggable:!1,resizable:!1,message:s.jsx("p",{children:"Mark all notifications as read?"}),header:"Read Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-primary",rejectClassName:"p-button-link mr-2",accept:()=>e(),reject:()=>{}})},d=async e=>await u({filterBy:"read",filterValue:r,page:e.page+1,records:e.rows,sortBy:e.sortField?e.sortField:"",sortOrder:e.sortField?e.sortOrder===-1?"DESC":"ASC":""}),n=[{field:"title",header:"Title",sortable:!0},{field:"description",header:"Message",sortable:!0,body:e=>(e==null?void 0:e.description)||"N/A"},{field:"created_at",header:"Time",sortable:!0,body:e=>p(e==null?void 0:e.createdAt).format("DD MMM YYYY, hh:mm A")},{field:"read",header:"Status",sortable:!0,body:e=>s.jsxs("div",{className:"inline-flex items-center justify-center gap-[0.375rem]",children:[!(e!=null&&e.read)&&s.jsx("div",{className:"h-[0.75rem] w-[0.75rem] rounded bg-[#D85A19]"}),(e==null?void 0:e.read)&&s.jsx("div",{className:"h-[0.75rem] w-[0.75rem] rounded bg-[#98CA9A]"}),s.jsx("p",{className:"text-sm",children:e.read?"Read":"Unread"})]})}];return s.jsxs("div",{className:"flex w-full flex-col",children:[s.jsx("div",{className:"text-bold flex w-full px-2 pb-4 text-xl text-gray-600",children:"Notifications"}),s.jsxs(b,{className:"flex w-full flex-col",children:[s.jsxs("div",{className:"my-2 flex flex-col-reverse justify-between gap-3 p-3 md:flex-row",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[s.jsx(j,{className:"w-full md:!w-fit",name:"attendance_statuses",placeholder:"Select status",options:[{label:"Unread",value:"0"},{label:"Read",value:"1"}],optionLabel:"label",optionValue:"value",value:r,onChange:e=>t(e.value)}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(i,{icon:"pi pi-times",severity:"danger",disabled:!r,onClick:()=>{t(""),a.current&&a.current.refreshListData()}}),s.jsx(i,{icon:"pi pi-search",disabled:!r,onClick:()=>{a.current&&a.current.refreshListData()}})]})]}),f.getUserPermissions().includes("employee_notifications.edit")&&s.jsx(i,{raised:!0,label:"Mark All As Read",onClick:c})]}),s.jsx(N,{dataHandler:d,id:"attendance_policies",headers:n,ref:a})]})]})};export{k as default};
