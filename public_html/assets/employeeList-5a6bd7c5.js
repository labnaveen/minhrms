import{r as o,G as D,v as q,a$ as le,b0 as _e,b1 as xe,$ as R,b2 as O,j as e,f as S,b3 as ye,b4 as fe,b5 as we,b6 as be,b7 as je,b8 as ve,aX as Se,aZ as De,b9 as Ee,ba as Ne,bb as Ce,bc as Me,C as ke,u as Fe,P as Ye,a as Ie,bd as Re,x as pe,B as Le,be as Pe,aG as Be,bf as J,bg as Ae,bh as Ve,bi as Ue,T as He,af as me,bj as Oe,bk as qe,bl as $e}from"./index-3ec7abe5.js";import{T as Ge}from"./index-b2a6305f.js";import{A as Te}from"./arrow-back-2554853d.js";import{E as ze}from"./edit-c01b3e15.js";import{P as ue}from"./plus-b36a0702.js";import{T as We}from"./trash-4a28e917.js";import{C as I}from"./index-3d6f48ca.js";import{u as he,e as Ke,f as Xe}from"./validationSchemas-9cdf4188.js";import{I as K}from"./inputtext.esm-e49a03d7.js";import{B as ne}from"./index-36dd5a0c.js";import{L as j}from"./index-37ade0e2.js";import{C as re}from"./calendar.esm-f987a87a.js";import{D as V,C as Je}from"./dropdown.esm-1ad10373.js";import{M as ie}from"./multiselect.esm-15dd71d0.js";import{u as de}from"./useDispatch-1aeda00f.js";import{P as Qe}from"./profileComponent-6607eb16.js";import{I as Ze}from"./inputswitch.esm-65362ee3.js";import{I as es}from"./paginator.esm-634e02d4.js";import"./index.esm-9e3aa09b.js";import"./index.esm-be3d6ae7.js";import"./index-c74eb1f3.js";import"./assignUnassignAsset-c41d0081.js";import"./api-9d9fddec.js";import"./default_profile_image-c791ba54.js";const ss="/assets/plus-black-50bccbfb.svg",as=({visible:n,onHide:y,tableRef:v})=>{const x=de(),i=2,[h]=o.useState(D().format("YYYY-MM-DD")),[l,m]=o.useState(1),g=q(le),[r,_]=o.useState(null),[E,p]=o.useState([]),[c,N]=o.useState([]),[L,Y]=o.useState([]),[$,Z]=o.useState([]),[U,ee]=o.useState([]),[C,G]=o.useState([]),[M,H]=o.useState({}),[k,T]=o.useState([]),[F,P]=o.useState({}),se=async()=>{const t=await ye(),d=await fe(),B=await we(),A=await be(),w=await je();p(t.status===200?t.data.data:[]),N(d.status===200?d.data.data:[]),Y(B.status===200?B.data.data:[]),Z(A.status===200?A.data.data:[]),ee(w.status===200?w.data.data:[])},ae=async t=>{var B,A;const d=await ve(t);if(d.status===200){const w=d.data.data,a={};if(_(w),((B=w==null?void 0:w.division_units)==null?void 0:B.length)>0){const u=w.division_units.map(f=>f.division_id);w.division_units.map(f=>a[f.division_id]=f.user_division.unit_id),P(a),T(U.filter(f=>u.includes(f.id)))}if(((A=w==null?void 0:w.Managers)==null?void 0:A.length)>0){const u=w.Managers.map(f=>f.reporting_role_id);w.Managers.map(f=>M[f.reporting_role_id]=f.id),H(M),G($.filter(f=>u.includes(f.id)))}}else _(null)},te=()=>{m(t=>t+1)},oe=()=>{m(t=>t-1)},s=he({initialValues:{employee_name:(r==null?void 0:r.employee_name)||"",dob_celebrated:(r==null?void 0:r.dob_celebrated)||D(h,"YYYY-MM-DD").subtract(18,"years"),dob_adhaar:(r==null?void 0:r.dob_adhaar)||D(h,"YYYY-MM-DD").subtract(18,"years"),employee_gender_id:(r==null?void 0:r.employee_gender_id)||"",employee_official_email:(r==null?void 0:r.employee_official_email)||"",phone:(r==null?void 0:r.phone)||"",employee_generated_id:(r==null?void 0:r.employee_generated_id)||"",date_of_joining:(r==null?void 0:r.date_of_joining)||h,role_id:(r==null?void 0:r.role_id)||"",master_policy_id:(r==null?void 0:r.master_policy_id)||"",reporting_managers:[],units:[]},validationSchema:Ke(C,k),onSubmit:async t=>{let d;g?d=await xe(g,t):d=await _e(t),(d.status===201||d.status===200)&&(X(),R.success(d.message),v.current.refreshListData())},enableReinitialize:!0}),ce=[{label:"Previous",onClick:oe,variant:"secondary",className:"min-w-[90px]",visible:l>1},{label:"Next",onClick:te,className:"min-w-[90px]",visible:l<i},{label:g?"Update":"Add",onClick:s.handleSubmit,className:"min-w-[90px]",visible:l===i,loading:s.isSubmitting}],X=()=>{x(O("")),m(1),_(null),G([]),H({}),T([]),P({}),s.resetForm(),y(!1)};return o.useEffect(()=>{se()},[]),o.useEffect(()=>{n&&g&&ae(g)},[n,g]),o.useEffect(()=>{if(n){let t={};(C==null?void 0:C.length)>0&&C.map(d=>{t[d.id]=M[d.id]}),H(t)}},[n,C]),o.useEffect(()=>{n&&s.setFieldValue("reporting_managers",Object.values(M).filter(t=>t!==void 0))},[n,M]),o.useEffect(()=>{if(n){let t={};(k==null?void 0:k.length)>0&&k.map(d=>{t[d.id]=F[d.id]}),P(t)}},[n,k]),o.useEffect(()=>{n&&s.setFieldValue("units",Object.values(F).filter(t=>t!==void 0))},[n,F]),e.jsx(ne,{header:g?"Update Employee Details":"Add New Employee",visible:n,onHide:X,progressValue:l/i,formikInstance:s,actions:ce,children:e.jsxs("div",{className:"m-auto grid w-full gap-3 md:grid-cols-2",children:[l===1&&e.jsxs(e.Fragment,{children:[e.jsx(j,{required:!0,title:"Employee Name",showError:s.errors.employee_name&&s.touched.employee_name,errorMessages:s.errors.employee_name,children:e.jsx(K,{name:"employee_name",value:s.values.employee_name,className:S("w-full",{"p-invalid text-red-500":s.errors.employee_name&&s.touched.employee_name}),onChange:t=>s.setFieldValue("employee_name",t.target.value)})}),e.jsx(j,{required:!0,title:"Date of Joining",showError:s.errors.date_of_joining&&s.touched.date_of_joining,errorMessages:s.errors.date_of_joining,children:e.jsx(re,{name:"date_of_joining",readOnlyInput:!0,dateFormat:"dd-mm-yy",value:D(s.values.date_of_joining,"YYYY-MM-DD").toDate(),className:S("w-full",{"p-invalid text-red-500":s.errors.date_of_joining&&s.touched.date_of_joining}),onChange:t=>s.setFieldValue("date_of_joining",D(t.value).format("YYYY-MM-DD"))})}),e.jsx(j,{required:!0,title:"Date of Birth Celebrated",showError:s.errors.dob_celebrated&&s.touched.dob_celebrated,errorMessages:s.errors.dob_celebrated,children:e.jsx(re,{name:"dob_celebrated",minDate:D().subtract(100,"year").toDate(),maxDate:D(h,"YYYY-MM-DD").subtract(18,"years").toDate(),readOnlyInput:!0,dateFormat:"dd-mm-yy",value:D(s.values.dob_celebrated,"YYYY-MM-DD").toDate(),className:S("w-full",{"p-invalid text-red-500":s.errors.dob_celebrated&&s.touched.dob_celebrated}),onChange:t=>s.setFieldValue("dob_celebrated",D(t.value).format("YYYY-MM-DD"))})}),e.jsx(j,{required:!0,title:"Date of Birth Documented",showError:s.errors.dob_adhaar&&s.touched.dob_adhaar,errorMessages:s.errors.dob_adhaar,children:e.jsx(re,{name:"dob_adhaar",minDate:D().subtract(100,"year").toDate(),maxDate:D(h,"YYYY-MM-DD").subtract(18,"years").toDate(),readOnlyInput:!0,dateFormat:"dd-mm-yy",value:D(s.values.dob_adhaar,"YYYY-MM-DD").toDate(),className:S("w-full",{"p-invalid text-red-500":s.errors.dob_adhaar&&s.touched.dob_adhaar}),onChange:t=>s.setFieldValue("dob_adhaar",D(t.value).format("YYYY-MM-DD"))})}),e.jsx(j,{required:!0,title:"Gender",showError:s.errors.employee_gender_id&&s.touched.employee_gender_id,errorMessages:s.errors.employee_gender_id,children:e.jsx(V,{name:"gender",placeholder:"Select Gender",options:E,optionLabel:"name",optionValue:"id",value:s.values.employee_gender_id,className:S("w-full",{"p-invalid text-red-500":s.errors.employee_gender_id&&s.touched.employee_gender_id}),onChange:t=>s.setFieldValue("employee_gender_id",t.value)})}),e.jsx(j,{required:!0,title:"Official Email ID",showError:s.errors.employee_official_email&&s.touched.employee_official_email,errorMessages:s.errors.employee_official_email,children:e.jsx(K,{name:"employee_official_email",value:s.values.employee_official_email,className:S("w-full",{"p-invalid text-red-500":s.errors.employee_official_email&&s.touched.employee_official_email}),onChange:t=>s.setFieldValue("employee_official_email",t.target.value)})}),e.jsx(j,{required:!0,title:"Mobile No.",showError:s.errors.phone&&s.touched.phone,errorMessages:s.errors.phone,children:e.jsx(K,{name:"phone",value:s.values.phone,className:S("w-full",{"p-invalid text-red-500":s.errors.phone&&s.touched.phone}),onChange:t=>s.setFieldValue("phone",t.target.value)})}),e.jsx(j,{required:!0,title:"Employee ID",showError:s.errors.employee_generated_id&&s.touched.employee_generated_id,errorMessages:s.errors.employee_generated_id,children:e.jsx(K,{name:"employee_generated_id",value:s.values.employee_generated_id,className:S("w-full",{"p-invalid text-red-500":s.errors.employee_generated_id&&s.touched.employee_generated_id}),onChange:t=>s.setFieldValue("employee_generated_id",t.target.value)})})]}),l===2&&e.jsxs(e.Fragment,{children:[e.jsx(j,{required:!0,title:"Access Role",showError:s.errors.role_id&&s.touched.role_id,errorMessages:s.errors.role_id,children:e.jsx(V,{name:"role_id",placeholder:"Select Role",options:c,optionLabel:"name",optionValue:"id",value:s.values.role_id,className:S("w-full",{"p-invalid text-red-500":s.errors.role_id&&s.touched.role_id}),onChange:t=>s.setFieldValue("role_id",t.value)})}),e.jsx(j,{required:!0,title:"Master Policy",showError:s.errors.master_policy_id&&s.touched.master_policy_id,errorMessages:s.errors.master_policy_id,children:e.jsx(V,{name:"master_policy_id",placeholder:"Select Master Policy",options:L,optionLabel:"policy_name",optionValue:"id",value:s.values.master_policy_id,className:S("w-full",{"p-invalid text-red-500":s.errors.master_policy_id&&s.touched.master_policy_id}),onChange:t=>s.setFieldValue("master_policy_id",t.value)})}),e.jsx(j,{title:"Reporting Roles",className:"md:col-span-2",children:e.jsx(ie,{dataKey:"id",name:"reporting_roles",options:$,filter:!0,resetFilterOnHide:!0,showClear:!0,display:"chip",optionLabel:"name",placeholder:"Select Reporting Roles",value:C,onChange:t=>G(t.value),pt:{label:{className:"flex !gap-1 flex-wrap mr-3"},token:{className:"w-max max-h-[2rem] !rounded-[0.25rem] !bg-[#37B3E0] !text-white py-1 px-2 text-sm m-0"}}})}),C&&C.map(t=>e.jsx(j,{required:!0,title:t.name,showError:!M[t.id]&&s.errors.reporting_managers&&s.touched.reporting_managers,errorMessages:s.errors.reporting_managers,children:e.jsx(V,{name:t.name.toLowerCase().split(" ").join("_"),placeholder:`Select ${t.name}`,options:t.reporting_managers,optionLabel:d=>`${d.user.employee_name} [${d.user.employee_generated_id}]`,optionValue:"id",value:M[t.id],className:S("w-full",{"p-invalid text-red-500":!M[t.id]&&s.errors.reporting_managers&&s.touched.reporting_managers}),onChange:d=>H({...M,[t.id]:d.value})})},t.name.toLowerCase().split(" ").join("_"))),e.jsx(j,{title:"Divisions",className:"md:col-span-2",children:e.jsx(ie,{dataKey:"id",name:"divisions",options:U,filter:!0,resetFilterOnHide:!0,showClear:!0,display:"chip",optionLabel:"division_name",placeholder:"Select Divisions",value:k,onChange:t=>T(t.value),pt:{label:{className:"flex !gap-1 flex-wrap mr-3"},token:{className:"w-max max-h-[2rem] !rounded-[0.25rem] !bg-[#37B3E0] !text-white py-1 px-2 text-sm m-0"}}})}),k.length>0&&k.map(t=>e.jsx(j,{required:!0,title:t.division_name,showError:!F[t.id]&&s.errors.units&&s.touched.units,errorMessages:s.errors.units,children:e.jsx(V,{name:t.division_name.toLowerCase().split(" ").join("_"),placeholder:`Select ${t.division_name}`,options:t.division_units,optionLabel:"unit_name",optionValue:"id",value:F[t.id],className:S("w-full",{"p-invalid text-red-500":!F[t.id]&&s.errors.units&&s.touched.units}),onChange:d=>P({...F,[t.id]:d.value})})},t.division_name.toLowerCase().split(" ").join("_")))]})]})})},ts=({visible:n,onHide:y,tableRef:v})=>{const x=q(Se),i=q(De),[h,l]=o.useState([]),[m,g]=o.useState([]),r=async()=>{const c=await Ne();l(c.status===200?c.data.data:[])},_=he({initialValues:{employee_id:[]},validationSchema:Xe,onSubmit:async c=>{const N=await Ee({divisionId:x,unitId:i,formData:c});N.status===201&&(p(),R.success(N.message),v.current.refreshListData())},enableReinitialize:!0}),E=[{label:"Add",onClick:_.handleSubmit,className:"min-w-[90px]",loading:_.isSubmitting}],p=()=>{_.resetForm(),g([]),y(!1)};return o.useEffect(()=>{n&&r()},[n]),o.useEffect(()=>{n&&((m==null?void 0:m.length)>0?_.setFieldValue("employee_id",m.map(c=>c.id)):_.setFieldValue("employee_id",[]))},[n,m]),e.jsx(ne,{header:"Add Employees",visible:n,onHide:p,actions:E,children:e.jsx("div",{className:"m-auto w-full",children:e.jsx(j,{title:"Employees",className:"md:col-span-2",showError:_.errors.employee_id&&_.touched.employee_id,errorMessages:_.errors.employee_id,children:e.jsx(ie,{dataKey:"id",name:"employees",options:h,filter:!0,resetFilterOnHide:!0,showClear:!0,display:"chip",optionLabel:c=>`${c.employee_name} (${c.employee_generated_id})`,placeholder:"Select Employees",value:m,onChange:c=>g(c.value),className:S("w-full",{"p-invalid text-red-500":_.errors.employee_id&&_.touched.employee_id}),pt:{label:{className:"flex !gap-1 flex-wrap mr-3"},token:{className:"w-max max-h-[2rem] !rounded-[0.25rem] !bg-[#37B3E0] !text-white py-1 px-2 text-sm m-0"}}})})})})},os=({visible:n,onHide:y})=>{const v=de(),x=q(le),[i,h]=o.useState([]),[l,m]=o.useState({}),g=async p=>{const c=await Ce(p);h(c.status===200?c.data.data:[])},_=[{label:"Submit",onClick:async()=>{const p=await Me(x,{leave_balance:l});p.status===200&&(E(),R.success(p.message))},className:"min-w-[90px]"}],E=()=>{v(O("")),y()};return o.useEffect(()=>{n&&x&&g(x)},[n,x]),o.useEffect(()=>{if(n&&(i==null?void 0:i.length)>0){const p=i.reduce((c,N)=>{const{leave_type_id:L,leave_balance:Y}=N;return c[L]=Y,c},{});m(p)}},[n,i]),e.jsx(ne,{header:"View/Update Leave Balance",visible:n,onHide:E,actions:_,children:e.jsxs("div",{className:"m-auto grid w-full gap-3 md:grid-cols-2",children:[e.jsx("div",{className:"h-6 w-[285px] font-['Lato'] text-lg font-normal leading-normal text-black md:col-span-2",children:"Upcoming Holidays"}),(i==null?void 0:i.length)>0&&Object.keys(l).length>0&&i.map(p=>e.jsx(j,{title:p.leave_type.leave_type_name,children:e.jsxs("div",{className:"p-inputgroup flex-1",children:[e.jsx(I,{disabled:l[p.leave_type_id]===0,icon:"pi pi-minus",onClick:()=>m({...l,[p.leave_type_id]:l[p.leave_type_id]-1})}),e.jsx(es,{min:0,max:366,minFractionDigits:2,maxFractionDigits:5,maxLength:6,placeholder:"Balance",value:l[p.leave_type_id],onValueChange:c=>m({...l,[p.leave_type_id]:c.value})}),e.jsx(I,{disabled:l[p.leave_type_id]>366,icon:"pi pi-plus",onClick:()=>m({...l,[p.leave_type_id]:l[p.leave_type_id]+1})})]})},p.leave_type_id)),(i==null?void 0:i.length)===0&&e.jsx("p",{className:"md:col-span-2",children:"No leaves were allotted to this employee!"})]})})};var rs={root:"p-progress-spinner",spinner:"p-progress-spinner-svg",circle:"p-progress-spinner-circle"},is=`
@layer primereact {
    .p-progress-spinner {
        position: relative;
        margin: 0 auto;
        width: 100px;
        height: 100px;
        display: inline-block;
    }
    
    .p-progress-spinner::before {
        content: '';
        display: block;
        padding-top: 100%;
    }
    
    .p-progress-spinner-svg {
        animation: p-progress-spinner-rotate 2s linear infinite;
        height: 100%;
        transform-origin: center center;
        width: 100%;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
    }
    
    .p-progress-spinner-circle {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: 0;
        stroke: #d62d20;
        animation: p-progress-spinner-dash 1.5s ease-in-out infinite, p-progress-spinner-color 6s ease-in-out infinite;
        stroke-linecap: round;
    }
}

@keyframes p-progress-spinner-rotate {
    100% {
        transform: rotate(360deg);
    }
}

@keyframes p-progress-spinner-dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
    }
}

@keyframes p-progress-spinner-color {
    100%,
    0% {
        stroke: #d62d20;
    }
    40% {
        stroke: #0057e7;
    }
    66% {
        stroke: #008744;
    }
    80%,
    90% {
        stroke: #ffa700;
    }
}
`,ls={spinner:function(y){var v=y.props;return{animationDuration:v.animationDuration}}},Q=ke.extend({defaultProps:{__TYPE:"ProgressSpinner",id:null,style:null,className:null,strokeWidth:"2",fill:"none",animationDuration:"2s",children:void 0},css:{classes:rs,styles:is,inlineStyles:ls}}),ge=o.memo(o.forwardRef(function(n,y){var v=Fe(),x=o.useContext(Ye),i=Q.getProps(n,x),h=o.useRef(null),l=Q.setMetaData({props:i}),m=l.ptm,g=l.cx,r=l.sx,_=l.isUnstyled;Ie(Q.css.styles,_,{name:"progressspinner"}),o.useImperativeHandle(y,function(){return{props:i,getElement:function(){return h.current}}});var E=v({id:i.id,ref:h,style:i.style,className:S(i.className,g("root")),role:"progressbar","aria-busy":!0},Q.getOtherProps(i),m("root")),p=v({className:g("spinner"),viewBox:"25 25 50 50",style:r("spinner")},m("spinner")),c=v({className:g("circle"),cx:"50",cy:"50",r:"20",fill:i.fill,strokeWidth:i.strokeWidth,strokeMiterlimit:"10"},m("circle"));return o.createElement("div",E,o.createElement("svg",p,o.createElement("circle",c)))}));ge.displayName="ProgressSpinner";const Ys=({division:n,divisionUnit:y,hideAddEmployee:v})=>{const x=de(),i=q(Re),h=o.useRef(null),l=o.useRef(null),m=q(le),[g,r]=o.useState(""),[_,E]=o.useState(""),[p,c]=o.useState(null),[N,L]=o.useState(null),[Y,$]=o.useState(!1),[Z,U]=o.useState(!1),[ee,C]=o.useState(!1),[G,M]=o.useState(!1),[H,k]=o.useState([]),T=async()=>{const a=await fe();k(a.status===200?a.data.data:[])},F=async a=>await Pe({filterBy:g,filterValue:_,unit_id:y||"",page:a.page+1,records:a.rows,sortBy:a.sortField?a.sortField:"",sortOrder:a.sortField?a.sortOrder===-1?"DESC":"ASC":""}),P=async a=>{const u=await Be(a);u.status===200?c(u.data.data):c(null)},se=a=>{const u=async f=>{const b=await $e(f);b.status===200&&(R.success(b.message),h.current.refreshListData())};return me({draggable:!1,resizable:!1,message:`Update status for ${a.employee_name} to ${a.status?"Inactive":"Active"}?`,header:"Update Employee Status",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",rejectClassName:"p-button-link mr-2",accept:()=>u(a.id),reject:()=>{}})},ae=a=>{const u=a==null?void 0:a.division_units.filter(b=>{var z,W;return((W=(z=b==null?void 0:b.division)==null?void 0:z.division_name)==null?void 0:W.toLowerCase())==="department"})[0],f=a==null?void 0:a.division_units.filter(b=>{var z,W;return((W=(z=b==null?void 0:b.division)==null?void 0:z.division_name)==null?void 0:W.toLowerCase())==="designation"})[0];return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{className:"text-center text-sm",children:(u==null?void 0:u.unit_name)||"N/A"}),e.jsx("p",{className:"text-center text-sm",children:(f==null?void 0:f.unit_name)||"N/A"})]})},te=a=>e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{className:"text-center text-sm",children:(a==null?void 0:a.employee_official_email)||"N/A"}),e.jsx("p",{className:"text-center text-sm",children:(a==null?void 0:a.phone)||"N/A"})]}),oe=a=>e.jsx("div",{className:"flex justify-center",children:e.jsx(Ze,{name:"employee_status",checked:a==null?void 0:a.status,onChange:()=>se(a)})}),X=[{field:"name",header:"Name",sortable:!0,body:a=>(a==null?void 0:a.employee_name)||"N/A"},{field:"employee_id",header:"Employee ID",sortable:!0,body:a=>(a==null?void 0:a.employee_generated_id)||"N/A"},{field:"role",header:"Role",sortable:!0,body:a=>{var u;return((u=a==null?void 0:a.role)==null?void 0:u.name)||"N/A"}},{field:"department",header:"Department & Designation",body:ae},{field:"contact",header:"Contact Info",sortable:!0,body:te},{field:"policy",header:"Policy",body:a=>{var u;return((u=a==null?void 0:a.master_policy)==null?void 0:u.policy_name)||"N/A"}},{field:"status",header:"Status",hidden:y,body:a=>oe(a)},{field:"profile",header:"Profile",hidden:y,body:a=>e.jsx("p",{className:"cursor-pointer text-center text-sm text-[#37B3E0] hover:scale-105 hover:underline",onClick:()=>{x(O(a.id)),$(!0)},children:"View"})},{field:"actions",align:"center",alignHeader:"center",className:"cursor-default",header:"Actions",body:a=>e.jsxs("div",{className:"flex w-full items-center justify-center gap-3",children:[!y&&e.jsxs(e.Fragment,{children:[e.jsx("img",{"data-pr-tooltip":"Add Leave Balance","data-pr-position":"left",className:"action-icon cursor-pointer",width:25,height:25,src:ss,onClick:()=>{x(O(a.id)),M(!0)}}),e.jsx("img",{"data-pr-tooltip":"Edit Employee Details","data-pr-position":"left",className:"action-icon cursor-pointer",width:25,height:25,src:ze,onClick:()=>{x(O(a.id)),U(!0)}})]}),e.jsx("img",{"data-pr-tooltip":"Delete Employee","data-pr-position":"left",className:"action-icon cursor-pointer",width:25,height:25,src:We,onClick:()=>w(a)}),e.jsx(He,{target:".action-icon",pt:{text:{className:"bg-white shadow-1 text-600 text-xs border-1 p-2"}}})]})}],t=()=>{C(!0)},d=()=>{U(!0)},B=async()=>{x(J(!0));const a=await Ae();a.status===200&&Ve(a.data,"Employee-Import-Sample"),x(J(!1))},A=async()=>{x(J(!0));const a=new FormData;a.append("file",N);const u=await Ue(a);u.status===200&&(R.success(u.message),h.current.refreshListData(),l.current.value=[],L(null)),x(J(!1))},w=a=>{const u=async f=>{let b;y?b=await Oe({divisionId:n,unitId:y,employeeId:f}):b=await qe(f),b.status===200&&(R.success(b.message),h.current.refreshListData())};return me({draggable:!1,resizable:!1,message:e.jsxs("p",{children:["Do you want to delete employee record for ",e.jsx("span",{className:"font-bold",children:a.employee_name}),"?"]}),header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",rejectClassName:"p-button-link mr-2",accept:()=>u(a.id),reject:()=>{}})};return o.useEffect(()=>{m&&Y&&P(m)},[m,Y]),o.useEffect(()=>{T()},[]),e.jsxs("div",{className:"flex w-full flex-col",children:[!Y&&e.jsxs(Je,{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-3 p-3 md:flex-row",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[g==="search_term"&&e.jsx(K,{placeholder:"Search",value:_,onChange:a=>E(a.target.value)}),g==="role"&&e.jsx(V,{placeholder:"Select Role",options:H,optionLabel:"name",optionValue:"id",value:_,onChange:a=>{E(a.value)}}),e.jsx(V,{placeholder:"Filter by",options:[{label:"Role",code:"role"},{label:"Employee Info",code:"search_term"}],optionLabel:"label",optionValue:"code",value:g,onChange:a=>{r(a.value)}}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{icon:"pi pi-times",severity:"danger",disabled:!g,onClick:()=>{r(""),E(""),h.current&&h.current.refreshListData()}}),e.jsx(I,{icon:"pi pi-search",disabled:!_||!g,onClick:()=>{h.current&&h.current.refreshListData()}})]})]}),pe.getUserPermissions().includes("employee_list.add")&&!v&&e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[e.jsx(I,{raised:!0,label:"Add New Employee",icon:e.jsx("img",{src:ue}),onClick:d}),e.jsx(I,{loading:i,raised:!0,label:"Download Sample",icon:"pi pi-download",onClick:B}),e.jsxs("div",{className:"flex w-full gap-3 md:w-fit",children:[!N&&e.jsx(I,{className:"w-full md:w-fit",raised:!0,label:"Import",icon:"pi pi-file-excel",onClick:()=>l.current&&l.current.click()}),N&&e.jsxs("div",{className:"flex w-full items-center justify-center gap-3 rounded-lg bg-[#D9D9D9] px-3 py-2 text-xs",children:[e.jsx("span",{className:"max-w-[80%] text-wrap",children:N.name}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:e.jsx("i",{className:"pi pi-times cursor-pointer text-red-500",onClick:()=>{l.current&&(l.current.value=[],L(null))}})}),e.jsx("span",{children:e.jsx("i",{className:"pi pi-check cursor-pointer text-blue-500",onClick:A})})]}),i&&e.jsx(ge,{pt:{root:{className:"w-[25px] h-[25px]"}}})]}),e.jsx("input",{className:"hidden",accept:".csv",type:"file",ref:l,onChange:a=>{if(a.target.files.length>0){const f=a.target.files[0].size;return a.target.files[0].name.split(".").pop().toLowerCase()!=="csv"?(R.error("Please upload only CSV files."),a.target.value=""):f>2097152?(R.error("File size exceeds the limit of 2 MB."),a.target.value=""):L(a.target.files[0])}}})]})]}),pe.getUserPermissions().includes("division.add")&&v&&e.jsx(I,{raised:!0,label:"Add Employees",icon:e.jsx("img",{src:ue}),onClick:t})]}),e.jsx(Ge,{dataHandler:F,id:"employee_list",headers:X,ref:h})]}),Y&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-max gap-2 border-none px-0 !font-extralight !text-black shadow-none",icon:e.jsx("img",{src:Te}),link:!0,label:"Go Back",onClick:()=>{x(O("")),$(!1),c(null)}}),e.jsx(Qe,{profileData:p,viewedBy:"hr",getUpdatedProfileData:()=>P(m)})]}),e.jsx(ts,{visible:ee,onHide:()=>C(!1),tableRef:h}),e.jsx(as,{visible:Z,onHide:()=>U(!1),tableRef:h}),e.jsx(os,{visible:G,onHide:()=>M(!1)})]})};export{Ys as default};
