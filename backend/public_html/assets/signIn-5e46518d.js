import{F as _,v,cz as b,j as e,f as u,L as N,m as S,cA as F,$ as p}from"./index-3ec7abe5.js";import{I}from"./inputtext.esm-e49a03d7.js";import{P as E}from"./password.esm-ecc90f83.js";import{u as L,y as $}from"./validationSchemas-9cdf4188.js";import{L as C,l as k}from"./api-94015866.js";import{F as M,a as R}from"./index.esm-a84e9864.js";import{C as z}from"./index-3d6f48ca.js";import{L as h}from"./index-37ade0e2.js";import{u as A}from"./useDispatch-1aeda00f.js";import"./iconBase-2780a5a8.js";const G=()=>{const x=A(),g=_(),w=v(b),s=L({initialValues:{employee_official_email:"",password:""},validationSchema:$,onSubmit:a=>{a&&y(a)}}),y=async a=>{const i=await k(a);if(i.status===200){const j=i.data.data.scope.permissions.map(t=>t.name),m=(t,d,r="")=>{var c;for(const l of t){if((c=l==null?void 0:l.permissions)!=null&&c.some(o=>d.includes(o))){let o;return l.index?o=r:o=r==="/"?`/${l.path}`:`${r}/${l.path}`,{element:l,path:o}}if(l.children){const o=l.index?r:r==="/"?`/${l.path}`:`${r}/${l.path}`,f=m(l.children,d,o);if(f.element)return f}}return{element:null,path:null}},{path:n}=m(S[0].children,j);n?(x(F(i)),g(n),p.success("Logged in successfully!"),s.resetForm()):p.error("Insufficient permissions!")}};return e.jsxs("div",{className:"mx-auto flex h-screen w-screen flex-col gap-2 bg-slate-100 md:flex-row md:p-2",children:[e.jsxs("div",{className:"hidden w-full flex-col bg-[#37B3E0] py-4 md:flex md:h-full md:rounded-lg",children:[e.jsx("h1",{className:"hidden text-center text-white md:block",children:"HRMS"}),e.jsx("img",{className:"m-auto",width:"90%",src:C,alt:"Cover Image"})]}),e.jsxs("div",{className:"flex h-full w-full flex-col justify-center p-3",children:[e.jsx("h3",{className:"mb-8 text-center text-gray-900 md:hidden",children:"HRMS"}),e.jsxs("form",{id:"login-form",className:"flex w-full flex-col gap-4 p-2 md:p-4",onSubmit:s.handleSubmit,children:[e.jsx("h3",{className:"mb-4 text-gray-900",children:"Sign In"}),e.jsx(h,{htmlFor:"employee_official_email",required:!0,title:"E-mail",showError:s.errors.employee_official_email&&s.touched.employee_official_email,errorMessages:s.errors.employee_official_email,children:e.jsx(I,{name:"employee_official_email",placeholder:"Enter your E-mail",value:s.values.employee_official_email,className:u("w-full",{"p-invalid text-red-500":s.errors.employee_official_email&&s.touched.employee_official_email}),onChange:a=>s.setFieldValue("employee_official_email",a.target.value)})}),e.jsx(h,{htmlFor:"password",required:!0,title:"Password",showError:s.errors.password&&s.touched.password,errorMessages:s.errors.password,children:e.jsx(E,{inputId:"password",placeholder:"Enter your password",hideIcon:e.jsx(M,{size:20}),showIcon:e.jsx(R,{size:20}),feedback:!1,toggleMask:!0,className:u("w-full",{"p-invalid text-red-500":s.errors.password&&s.touched.password}),value:s.values.password,onChange:a=>{s.setFieldValue("password",a.target.value)}})}),e.jsxs("div",{className:"mt-4 flex w-full flex-col items-start justify-between gap-4 sm:items-center md:flex-row",children:[e.jsx(N,{className:"mb-2 cursor-pointer font-medium text-gray-600 no-underline hover:underline md:mb-0",to:"/forgot-password",children:"Forgot password?"}),e.jsx(z,{disabled:w,className:"w-full md:w-4",raised:!0,label:"Sign In"})]})]})]})]})};export{G as default};
