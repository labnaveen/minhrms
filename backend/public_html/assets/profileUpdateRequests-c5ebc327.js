import{r as h,j as r,af as u,$ as x,G as m}from"./index-3ec7abe5.js";import{C as R}from"./dropdown.esm-1ad10373.js";import{T as C}from"./index-b2a6305f.js";import{l as P,m as w,n as q}from"./api-9fc8da4c.js";import{I as A}from"./inputtext.esm-e49a03d7.js";import{C as n}from"./index-3d6f48ca.js";import"./index.esm-9e3aa09b.js";import"./paginator.esm-634e02d4.js";const M=()=>{const a=h.useRef(null),[l,p]=h.useState(""),g=async e=>await P({filterBy:"search_term",filterValue:l,page:e.page+1,records:e.rows,sortBy:e.sortField?e.sortField:"",sortOrder:e.sortField?e.sortOrder===-1?"DESC":"ASC":""}),j=e=>{var c,s;const o=async i=>{const t=await w(i);t.status===200&&(x.success(t.message),a.current.refreshListData())};return u({draggable:!1,resizable:!1,message:r.jsxs("p",{children:["Approve profile update request for ",r.jsx("span",{className:"font-bold",children:(s=(c=e==null?void 0:e.profile_change_record)==null?void 0:c.user)==null?void 0:s.employee_name}),"?"]}),header:"Approval Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-success",rejectClassName:"p-button-link mr-2",accept:()=>o(e.id),reject:()=>{}})},_=e=>{var c,s;const o=async i=>{const t=await q(i);t.status===200&&(x.success(t.message),a.current.refreshListData())};return u({draggable:!1,resizable:!1,message:r.jsxs("p",{children:["Reject profile update request for ",r.jsx("span",{className:"font-bold",children:(s=(c=e==null?void 0:e.profile_change_record)==null?void 0:c.user)==null?void 0:s.employee_name}),"?"]}),header:"Recjection Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",rejectClassName:"p-button-link mr-2",accept:()=>o(e.id),reject:()=>{}})},d=(e,o)=>{const c={};for(const s in e)if(e.hasOwnProperty(s))if(o.hasOwnProperty(s))if(typeof e[s]=="object"&&typeof o[s]=="object"){const i=d(e[s],o[s]);Object.keys(i).length>0&&(c[s]=i)}else e[s]!==o[s]&&(c[s]=e[s]);else c[s]=e[s];for(const s in o)o.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(c[s]=o[s]);return c},f=e=>{const o=(c,s)=>{switch(c){case"employee_name":return r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",s||"---"]},c);case"dob_adhaar":return r.jsxs("p",{children:[r.jsx("strong",{children:"D.O.B Documented:"})," ",s?m(s).format("DD MMM, YYYY"):"---"]},c);case"dob_celebrated":return r.jsxs("p",{children:[r.jsx("strong",{children:"D.O.B Celebrated:"})," ",s?m(s).format("DD MMM, YYYY"):"---"]},c);case"employee_gender_id":return r.jsxs("p",{children:[r.jsx("strong",{children:"Gender:"})," ",s==null?void 0:s.name]},c);case"blood_group":return r.jsxs("p",{children:[r.jsx("strong",{children:"Blood Group:"})," ",s||"---"]},c);case"religion":return r.jsxs("p",{children:[r.jsx("strong",{children:"Religion:"})," ",s||"---"]},c);case"nationality":return r.jsxs("p",{children:[r.jsx("strong",{children:"Nationality:"})," ",s||"---"]},c);case"employee_personal_email":return r.jsxs("p",{children:[r.jsx("strong",{children:"Personal Email:"})," ",s||"---"]},c);case"alternate_email":return r.jsxs("p",{children:[r.jsx("strong",{children:"Alternate Email:"})," ",s||"---"]},c);case"phone":return r.jsxs("p",{children:[r.jsx("strong",{children:"Personal Phone:"})," ",s||"---"]},c);case"alternate_contact":return r.jsxs("p",{children:[r.jsx("strong",{children:"Alternate Phone:"})," ",s||"---"]},c);case"bank_name":return r.jsxs("p",{children:[r.jsx("strong",{children:"Bank NAme:"})," ",s||"---"]},c);case"bank_branch":return r.jsxs("p",{children:[r.jsx("strong",{children:"Branch Name:"})," ",s||"---"]},c);case"ifsc_code":return r.jsxs("p",{children:[r.jsx("strong",{children:"IFSC Code:"})," ",s||"---"]},c);case"account_number":return r.jsxs("p",{children:[r.jsx("strong",{children:"Account Number:"})," ",s||"---"]},c);case"account_holder_name":return r.jsxs("p",{children:[r.jsx("strong",{children:"Account Holder Name:"})," ",s||"---"]},c);case"adhaar_number":return r.jsxs("p",{children:[r.jsx("strong",{children:"Aadhaar Number:"})," ",s||"---"]},c);case"pan_number":return r.jsxs("p",{children:[r.jsx("strong",{children:"PAN Number:"})," ",s||"---"]},c)}};return r.jsx("div",{className:"flex w-full flex-col",children:Object.keys(e).map(c=>o(c,e[c]))})},b=[{field:"employee_name",header:"Requester",sortable:!0,body:e=>{var o,c;return((c=(o=e==null?void 0:e.profile_change_record)==null?void 0:o.user)==null?void 0:c.employee_name)||"N/A"}},{field:"section",header:"Section",sortable:!0,body:e=>{var o,c;return((c=(o=e==null?void 0:e.profile_change_record)==null?void 0:o.change)==null?void 0:c.section)||"N/A"}},{field:"previous",header:"Previous",body:e=>{var o,c,s;return(o=e==null?void 0:e.profile_change_record)!=null&&o.previous?f(d((c=e==null?void 0:e.profile_change_record)==null?void 0:c.previous,(s=e==null?void 0:e.profile_change_record)==null?void 0:s.change)):"N/A"}},{field:"updated",header:"Updated",body:e=>{var o,c,s;return(o=e==null?void 0:e.profile_change_record)!=null&&o.change?f(d((c=e==null?void 0:e.profile_change_record)==null?void 0:c.change,(s=e==null?void 0:e.profile_change_record)==null?void 0:s.previous)):"N/A"}},{field:"actions",header:"Actions",alignHeader:"center",body:e=>r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[r.jsx(n,{className:"w-full text-sm hover:scale-110 md:w-fit",outlined:!0,label:"Approve",severity:"success",onClick:()=>j(e)}),r.jsx(n,{className:"w-full text-sm hover:scale-110 md:w-fit",outlined:!0,label:"Reject",severity:"danger",onClick:()=>_(e)})]})}];return r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsx("div",{className:"text-bold flex w-full px-2 pb-4 text-xl text-gray-600",children:"Profile Update Requests"}),r.jsxs(R,{className:"flex w-full flex-col",children:[r.jsx("div",{className:"my-2 flex flex-col justify-between p-3 md:flex-row",children:r.jsxs("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[r.jsx(A,{placeholder:"Search requester name",value:l,onChange:e=>p(e.target.value)}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(n,{icon:"pi pi-times",severity:"danger",onClick:()=>{p(""),a.current&&a.current.refreshListData()}}),r.jsx(n,{icon:"pi pi-search",disabled:!l,onClick:()=>{a.current&&a.current.refreshListData()}})]})]})}),r.jsx(C,{dataHandler:g,id:"regularisation_requests",headers:b,ref:a})]})]})};export{M as default};
