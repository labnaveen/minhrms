import{j as a,r as i,G as j,v as Ce,ak as He,al as Pt,am as Rt,an as Dt,$ as $e,f as I,ao as Ot,ap as qe,aq as Ke,ar as Bt,as as kt,at as Ue,T as Vt,ae as Ht,au as $t,af as qt,av as Kt,C as Ut,P as zt,a as Wt,aw as pe,ax as Xt,c as Jt,d as Gt,ay as F,U as Qt,I as De,l as V,R as we,D as P,g as je,O as Oe,az as Zt,aA as ea,aB as ta,aC as aa,aD as ra}from"./index-3ec7abe5.js";import{D as Q,a as na,C as Ne}from"./dropdown.esm-1ad10373.js";import{C as sa}from"./index-7054a830.js";import{T as oa}from"./index-b2a6305f.js";import{C as Se}from"./index-3d6f48ca.js";import{u as la,a as ia}from"./validationSchemas-9cdf4188.js";import{I as Be}from"./inputtext.esm-e49a03d7.js";import{B as ze,M as ca}from"./index-36dd5a0c.js";import{L as G}from"./index-37ade0e2.js";import{C as Ie,a as ua}from"./calendar.esm-f987a87a.js";import{u as Ee}from"./useDispatch-1aeda00f.js";import{E as da}from"./edit-c01b3e15.js";import{T as pa}from"./trash-4a28e917.js";import{b as ma}from"./index.esm-a84e9864.js";import{C as fa}from"./index.esm-9e3aa09b.js";import{C as va}from"./index.esm-be3d6ae7.js";import"./paginator.esm-634e02d4.js";import"./iconBase-2780a5a8.js";const ha="/assets/days-approved-98089622.svg",ya="/assets/days-pending-1c69a48a.svg",xa="/assets/days-rejected-9712a8ea.svg",ga="/assets/days-requested-f7f48dc7.svg",ba="/assets/holidays-calendar-2a429a83.svg",_a=e=>a.jsxs("div",{className:"mr-3 flex w-full max-w-fit flex-col",children:[a.jsx("div",{className:"flex w-full rounded-t-lg bg-[#37B3E0] p-2 text-sm font-bold text-white",children:e["leave_type.leave_type_name"]}),a.jsx("div",{className:"flex w-full justify-center rounded-b-lg border-x-2 border-b-2 p-3",children:a.jsx(sa,{minValue:0,maxValue:e==null?void 0:e.leave_balance,value:e==null?void 0:e.usedLeave,children:`${parseFloat(e==null?void 0:e.usedLeave).toFixed(2)}/${parseFloat((e==null?void 0:e.usedLeave)+(e==null?void 0:e.leave_balance)).toFixed(2)}`})})]}),wa=({visible:e,onHide:o,tableRef:r})=>{const t=Ee(),[f]=i.useState(j().format("YYYY-MM-DD")),v=Ce(He),[u,w]=i.useState([]),[A,L]=i.useState([]),[g,K]=i.useState([]),[H,$]=i.useState(null),b=Ce(Pt),[d,S]=i.useState(null),R=async()=>{const n=await qe();w(n.status===200?n.data.data:[]);const h=await Ke();L(h.status===200?h.data.data:[]);const Y=await Bt();K(Y.status===200?Y.data.data:[])},M=async n=>{const h=await kt(n);h.status===200?S(h.data.data):S(null)},q=()=>{c.resetForm(),t(Ue("")),S(null),o(!1)},c=la({initialValues:{leave_type_id:(d==null?void 0:d.leave_type_id)||"",day_type_id:(d==null?void 0:d.day_type_id)||"",start_date:(d==null?void 0:d.start_date)||f,end_date:(d==null?void 0:d.end_date)||f,contact_number:(d==null?void 0:d.contact_number)||"",reason:(d==null?void 0:d.reason)||"",supporting_docs:(d==null?void 0:d.supporting_docs)||null,half_day_type_id:(d==null?void 0:d.half_day_type_id)||1},validationSchema:ia(v),onSubmit:async n=>{let h;b?h=await Rt(b,n):h=await Dt(n),(h.status===201||h.status===200)&&(q(),$e.success(h.message),r.current.refreshListData())},enableReinitialize:!0}),x=[{label:"Submit",onClick:c.handleSubmit,className:"min-w-[90px]",loading:c.isSubmitting}];return i.useEffect(()=>{$(u.filter(n=>{var h;return n.id===((h=c==null?void 0:c.values)==null?void 0:h.leave_type_id)})[0])},[u]),i.useEffect(()=>{e&&R()},[e]),i.useEffect(()=>{e&&b&&M(b)},[e,b]),a.jsx(ze,{header:"Leave Request",visible:e,onHide:q,actions:x,children:a.jsxs("div",{className:"m-auto grid w-full gap-3 md:grid-cols-2",children:[a.jsx(G,{required:!0,htmlFor:"leave_type_id",title:"Leave Type",showError:c.errors.leave_type_id&&c.touched.leave_type_id,errorMessages:c.errors.leave_type_id,children:a.jsx(Q,{inputId:"leave_type_id",options:u,optionLabel:"leave_type_name",optionValue:"id",placeholder:"Select Leave Type",value:c.values.leave_type_id,className:I("w-full",{"p-invalid text-red-500":c.errors.leave_type_id&&c.touched.leave_type_id}),onChange:n=>{c.setFieldValue("leave_type_id",n.value),$(u.filter(h=>h.id===n.value)[0])}})}),a.jsx(G,{required:!0,htmlFor:"day_type_id",title:"Day Type",showError:c.errors.day_type_id&&c.touched.day_type_id,errorMessages:c.errors.day_type_id,children:a.jsx(Q,{inputId:"day_type_id",options:H!=null&&H.allow_half_days?A:A.filter(n=>n.id!=1),optionLabel:"name",optionValue:"id",placeholder:"Select Day Type",value:c.values.day_type_id,className:I("w-full",{"p-invalid text-red-500":c.errors.day_type_id&&c.touched.day_type_id}),onChange:n=>{c.setFieldValue("day_type_id",n.value),n.value===1&&c.setFieldValue("end_date",c.values.start_date)}})}),a.jsx(G,{htmlFor:"start_date",required:!0,title:c.values.day_type_id===2?"From":"Date",showError:c.errors.start_date&&c.touched.start_date,errorMessages:c.errors.start_date,children:a.jsx(Ie,{maxDate:Ot(),readOnlyInput:!0,dateFormat:"dd-mm-yy",value:j(c.values.start_date,"YYYY-MM-DD").toDate(),className:I("w-full",{"p-invalid text-red-500":c.errors.start_date&&c.touched.start_date}),onChange:n=>{c.setFieldValue("start_date",j(n.value).format("YYYY-MM-DD")),c.setFieldValue("end_date",j(n.value).format("YYYY-MM-DD"))}})}),c.values.day_type_id===2&&a.jsx(G,{htmlFor:"end_date",required:!0,title:"To",showError:c.errors.end_date&&c.touched.end_date,errorMessages:c.errors.end_date,children:a.jsx(Ie,{readOnlyInput:!0,minDate:j(c.values.start_date,"YYYY-MM-DD").toDate(),dateFormat:"dd-mm-yy",value:j(c.values.end_date,"YYYY-MM-DD").toDate(),className:I("w-full",{"p-invalid text-red-500":c.errors.end_date&&c.touched.end_date}),onChange:n=>c.setFieldValue("end_date",j(n.value).format("YYYY-MM-DD"))})}),c.values.day_type_id===1&&a.jsx(G,{required:!0,htmlFor:"half_day_type_id",title:"Halfday Type",showError:c.errors.half_day_type_id&&c.touched.half_day_type_id,errorMessages:c.errors.half_day_type_id,children:a.jsx(Q,{inputId:"half_day_type_id",options:g,optionLabel:"name",optionValue:"id",value:c.values.half_day_type_id,className:I("w-full",{"p-invalid text-red-500":c.errors.half_day_type_id&&c.touched.half_day_type_id}),onChange:n=>c.setFieldValue("half_day_type_id",n.value)})}),(v==null?void 0:v.contact_number_allowed)&&a.jsx(G,{required:v==null?void 0:v.contact_number_mandatory,title:"Alternate Contact Number",htmlFor:"contact_number",className:"md:col-span-2",showError:c.errors.contact_number&&c.touched.contact_number,errorMessages:c.errors.contact_number,children:a.jsx(Be,{name:"contact_number",value:c.values.contact_number,className:I("w-full",{"p-invalid text-red-500":c.errors.contact_number&&c.touched.contact_number}),onChange:n=>c.setFieldValue("contact_number",n.target.value)})}),(v==null?void 0:v.reason_for_leave)&&a.jsx(G,{required:v==null?void 0:v.reason_for_leave_mandatory,title:"Reason For Leave",htmlFor:"reason",className:"md:col-span-2",showError:c.errors.reason&&c.touched.reason,errorMessages:c.errors.reason,children:a.jsx(Be,{name:"reason",value:c.values.reason,className:I("w-full",{"p-invalid text-red-500":c.errors.reason&&c.touched.reason}),onChange:n=>c.setFieldValue("reason",n.target.value)})})]})})},ja=()=>{const e=Ee(),o=i.useRef(null),[r,t]=i.useState(""),[f,v]=i.useState(""),[u,w]=i.useState(j().toDate()),[A,L]=i.useState(!1),[g,K]=i.useState([]),[H,$]=i.useState([]),[b,d]=i.useState([]),S=async()=>{const n=await qe(),h=await Ke(),Y=await Ht();K(n.status===200?n.data.data:[]),$(h.status===200?h.data.data:[]),d(Y.status===200?Y.data.data:[])},R=async n=>await $t({month:u?j(u).month()+1:"",year:u?j(u).year():"",filterBy:r,filterValue:f,page:n.page+1,records:n.rows,sortBy:n.sortField?n.sortField:"",sortOrder:n.sortField?n.sortOrder===-1?"DESC":"ASC":""}),M=n=>{const h=async Y=>{const z=await Kt(Y);z.status===200&&($e.success(z.message),o.current.refreshListData())};return qt({draggable:!1,resizable:!1,message:a.jsx("p",{children:"Do you want to delete this request?"}),header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",rejectClassName:"p-button-link mr-2",accept:()=>h(n.id),reject:()=>{}})},q=n=>{if(n.id==1)return"#F6BB42";if(n.id==2)return"#00B087";if(n.id==3)return"#FF684F"},x=[{field:"leave_type",header:"Applied For",body:n=>{var h;return((h=n==null?void 0:n.leave_type)==null?void 0:h.leave_type_name)||"N/A"}},{field:"day_type",header:"Leave Type",body:n=>{var h;return((h=n==null?void 0:n.day_type)==null?void 0:h.name)||"N/A"}},{field:"start_date",header:"Start Date",sortable:!0,body:n=>j(n.start_date).format("ddd, MMM DD, YYYY")},{field:"end_date",header:"End Date",sortable:!0,body:n=>j(n.end_date).format("ddd, MMM DD, YYYY")},{field:"reason",header:"Reason",body:n=>(n==null?void 0:n.reason)||"---"},{field:"status",header:"Status",sortable:!0,body:n=>{var h,Y;return a.jsxs("div",{className:"inline-flex items-center justify-center gap-[0.375rem]",children:[a.jsx("div",{className:`h-[0.75rem] w-[0.75rem] rounded-full bg-[${q(n==null?void 0:n.approval_status)}]`}),a.jsx("span",{className:"text-sm",children:((h=n==null?void 0:n.approval_status)==null?void 0:h.name)||"N/A"}),((Y=n==null?void 0:n.approval_status)==null?void 0:Y.id)===3&&a.jsx(ma,{"data-pr-tooltip":(n==null?void 0:n.reject_reason)||"Rejection reason not available","data-pr-position":"left",className:"rejection-info-icon"})]})}},{field:"actions",align:"center",alignHeader:"center",className:"cursor-default",header:"Actions",body:n=>a.jsxs("div",{className:"flex w-full items-center justify-center gap-3",children:[n.approval_status.id===1&&a.jsxs(a.Fragment,{children:[a.jsx("img",{className:"cursor-pointer",width:25,height:25,src:da,onClick:()=>{e(Ue(n.id)),L(!0)}}),a.jsx("img",{className:"cursor-pointer",width:25,height:25,src:pa,onClick:()=>M(n)})]}),n.approval_status.id!=1&&a.jsx("p",{children:"---"})]})}];return i.useEffect(()=>{S()},[]),i.useEffect(()=>{o.current&&o.current.refreshListData()},[u]),a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[a.jsxs("div",{className:"flex flex-col justify-between gap-3 md:flex-row",children:[a.jsx("p",{className:"text-lg text-[#37B3E0]",children:"Leave Requests"}),a.jsx(Se,{raised:!0,label:"Apply For Leaves",className:"px-3",onClick:()=>L(!0)})]}),a.jsxs("div",{className:"flex flex-col items-center gap-3 md:flex-row",children:[a.jsx(Ie,{name:"filter_date",className:"w-full md:!w-fit",readOnlyInput:!0,view:"month",dateFormat:"M yy",placeholder:"Select date",value:u,onChange:n=>{t(""),v(""),w(n.value)}}),r==="leave_type"&&a.jsx(Q,{className:"w-full md:!w-fit",name:"leave-types",placeholder:"Select leave type",options:g,optionLabel:"leave_type_name",optionValue:"id",value:f,onChange:n=>v(n.value)}),r==="day_type"&&a.jsx(Q,{className:"w-full md:!w-fit",name:"day-types",placeholder:"Select day type",options:H,optionLabel:"name",optionValue:"id",value:f,onChange:n=>v(n.value)}),r==="status"&&a.jsx(Q,{className:"w-full md:!w-fit",name:"status",placeholder:"Select status",options:b,optionLabel:"name",optionValue:"id",value:f,onChange:n=>v(n.value)}),a.jsx(Q,{className:"w-full md:!w-fit",placeholder:"Filter by",options:[{label:"Leave Type",code:"leave_type"},{label:"Day Type",code:"day_type"},{label:"Status",code:"status"}],optionLabel:"label",optionValue:"code",value:r,onChange:n=>{v(""),t(n.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Se,{icon:"pi pi-times",severity:"danger",disabled:!r,onClick:()=>{t(""),v(""),o.current&&o.current.refreshListData()}}),a.jsx(Se,{icon:"pi pi-search",disabled:!r||!f,onClick:()=>{o.current&&o.current.refreshListData()}})]})]})]}),a.jsx(oa,{dataHandler:R,id:"attendance_policies",headers:x,ref:o}),a.jsx(wa,{visible:A,onHide:()=>L(!1),tableRef:o}),a.jsx(Vt,{target:".rejection-info-icon",pt:{text:{className:"bg-white shadow-1 text-900 text-xs border-1 p-2 max-w-[150px]"}}})]})},Na=({visible:e,onHide:o,holidays:r})=>{var t,f,v,u;return a.jsx(ze,{header:"Events",visible:e,onHide:o,children:a.jsxs("div",{className:"flex w-full flex-col gap-3",children:[((t=r==null?void 0:r.today)==null?void 0:t.length)>0&&a.jsx("div",{className:"m-auto grid w-full gap-3 md:grid-cols-2 2xl:grid-cols-4",children:r==null?void 0:r.today.map(w=>a.jsxs("div",{className:"flex w-full flex-col rounded bg-[#FAFBFD] p-3",children:[a.jsx("p",{className:"text-sm font-bold",children:w.name}),a.jsx("p",{className:"text-xs",children:j(w.date).format("MMMM DD, YYYY | dddd")})]},`today-holidays-${w.name}`))}),((f=r==null?void 0:r.today)==null?void 0:f.length)===0&&a.jsx("p",{className:"md:col-span-2 2xl:col-span-4",children:"No holidays today!"}),a.jsx("div",{className:"h-6 w-[285px] font-['Lato'] text-lg font-normal leading-normal text-black",children:"Upcoming Holidays"}),((v=r==null?void 0:r.upcoming)==null?void 0:v.length)>0&&a.jsx("div",{className:"m-auto grid w-full gap-3 md:grid-cols-2 2xl:grid-cols-4",children:r==null?void 0:r.upcoming.map(w=>a.jsxs("div",{className:"flex w-full flex-col rounded bg-[#FAFBFD] p-3",children:[a.jsx("p",{className:"text-sm font-bold",children:w.name}),a.jsx("p",{className:"text-xs",children:j(w.date).format("MMMM DD, YYYY | dddd")})]},`upcoming-holidays-${w.name}`))}),((u=r==null?void 0:r.upcoming)==null?void 0:u.length)===0&&a.jsx("p",{className:"md:col-span-2 2xl:col-span-4",children:"No upcmoing holidays found!"})]})})};function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},oe(e)}function Sa(e,o){if(oe(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,o||"default");if(oe(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}function Ca(e){var o=Sa(e,"string");return oe(o)==="symbol"?o:String(o)}function Ia(e,o,r){return o=Ca(o),o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Me.apply(this,arguments)}function Te(e,o){(o==null||o>e.length)&&(o=e.length);for(var r=0,t=new Array(o);r<o;r++)t[r]=e[r];return t}function Ma(e){if(Array.isArray(e))return Te(e)}function Ta(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function We(e,o){if(e){if(typeof e=="string")return Te(e,o);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Te(e,o)}}function Ea(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(e){return Ma(e)||Ta(e)||We(e)||Ea()}function Fa(e){if(Array.isArray(e))return e}function La(e,o){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var t,f,v,u,w=[],A=!0,L=!1;try{if(v=(r=r.call(e)).next,o===0){if(Object(r)!==r)return;A=!1}else for(;!(A=(t=v.call(r)).done)&&(w.push(t.value),w.length!==o);A=!0);}catch(g){L=!0,f=g}finally{try{if(!A&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(L)throw f}}return w}}function Aa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,o){return Fa(e)||La(e,o)||We(e,o)||Aa()}var Ya=`
@layer primereact {
    .p-carousel {
        display: flex;
        flex-direction: column;
    }
    
    .p-carousel-content {
        display: flex;
        flex-direction: column;
        overflow: auto;
    }
    
    .p-carousel-prev,
    .p-carousel-next {
        align-self: center;
        flex-grow: 0;
        flex-shrink: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
    }
    
    .p-carousel-container {
        display: flex;
        flex-direction: row;
    }
    
    .p-carousel-items-content {
        overflow: hidden;
        width: 100%;
    }
    
    .p-carousel-items-container {
        display: flex;
        flex-direction: row;
    }
    
    .p-carousel-indicators {
        display: flex;
        flex-direction: row;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .p-carousel-indicator > button {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Vertical */
    .p-carousel-vertical .p-carousel-container {
        flex-direction: column;
    }
    
    .p-carousel-vertical .p-carousel-items-container {
        flex-direction: column;
        height: 100%;
    }
    
    /* Keyboard Support */
    .p-items-hidden .p-carousel-item {
        visibility: hidden;
    }
    
    .p-items-hidden .p-carousel-item.p-carousel-item-active {
        visibility: visible;
    }
}
`,Pa={root:function(o){var r=o.isVertical;return I("p-carousel p-component",{"p-carousel-vertical":r,"p-carousel-horizontal":!r})},container:"p-carousel-container",content:"p-carousel-content",indicators:"p-carousel-indicators p-reset",header:"p-carousel-header",footer:"p-carousel-footer",itemsContainer:"p-carousel-items-container",itemsContent:"p-carousel-items-content",previousButton:function(o){var r=o.isDisabled;return I("p-carousel-prev p-link",{"p-disabled":r})},previousButtonIcon:"p-carousel-prev-icon",nextButton:function(o){var r=o.isDisabled;return I("p-carousel-next p-link",{"p-disabled":r})},nextButtonIcon:"p-carousel-next-icon",indicator:function(o){var r=o.isActive;return I("p-carousel-indicator",{"p-highlight":r})},indicatorButton:"p-link",itemCloned:function(o){var r=o.itemProps;return I(r.className,"p-carousel-item",{"p-carousel-item-active":r.active,"p-carousel-item-start":r.start,"p-carousel-item-end":r.end})},item:function(o){var r=o.itemProps;return I(r.className,"p-carousel-item",{"p-carousel-item-active":r.active,"p-carousel-item-start":r.start,"p-carousel-item-end":r.end})}},Ra={itemsContent:function(o){var r=o.height;return{height:r}}},me=Ut.extend({defaultProps:{__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,showIndicators:!0,showNavigators:!0,autoplayInterval:0,numVisible:1,numScroll:1,prevIcon:null,nextIcon:null,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null,children:void 0},css:{classes:Pa,styles:Ya,inlineStyles:Ra}});function ke(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),r.push.apply(r,t)}return r}function Ve(e){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?ke(Object(r),!0).forEach(function(t){Ia(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var fe=i.memo(function(e){var o=e.ptm,r=e.cx,t=e.className&&e.className==="p-carousel-item-cloned"?"itemCloned":"item",f=e.template(e.item),v=F({className:r(t,{itemProps:e}),role:e.role,"aria-roledescription":e.ariaRoledescription,"aria-label":e.ariaLabel,"aria-hidden":e.ariaHidden,"data-p-carousel-item-active":e.active,"data-p-carousel-item-start":e.start,"data-p-carousel-item-end":e.end},o(t));return i.createElement("div",v,f)}),Xe=i.memo(i.forwardRef(function(e,o){var r=i.useContext(zt),t=me.getProps(e,r),f=i.useState(t.numVisible),v=se(f,2),u=v[0],w=v[1],A=i.useState(t.numScroll),L=se(A,2),g=L[0],K=L[1],H=i.useState(t.page*t.numScroll*-1),$=se(H,2),b=$[0],d=$[1],S=i.useState(t.page),R=se(S,2),M=R[0],q=R[1],c=me.setMetaData({props:t,state:{numVisible:u,numScroll:g,totalShiftedItems:b,page:M}}),x=c.ptm,n=c.cx,h=c.sx,Y=c.isUnstyled;Wt(me.css.styles,Y,{name:"carousel"});var z=i.useRef(null),B=i.useRef(null),W=i.useRef(0),le=i.useRef(!!t.autoplayInterval),ie=i.useRef(""),Je=i.useRef(20),ve=i.useRef(null),he=i.useRef(null),Z=i.useRef(null),U=i.useRef(null),X=i.useRef(!1),J=i.useRef(null),Ge=pe(g),Qe=pe(u),Fe=pe(t.value),ye=pe(t.page),ee=t.orientation==="vertical",re=t.circular||!!t.autoplayInterval,k=re&&t.value&&t.value.length>=u,E=t.value?Math.max(Math.ceil((t.value.length-u)/g)+1,0):0,Le=E&&t.autoplayInterval&&le.current,Ae=t.onPageChange&&!Le,D=Ae?t.page:M,Ze=Xt({listener:function(){Ye()},when:t.responsiveOptions}),et=se(Ze,1),tt=et[0],te=function(s,l){var p=b;if(l!=null)p=g*l*-1,k&&(p-=u),X.current=!1;else{p+=g*s,X.current&&(p+=W.current-g*s,X.current=!1);var N=k?p+u:p;l=Math.abs(Math.floor(N/g))}k&&M===E-1&&s===-1?(p=-1*(t.value.length+u),l=0):k&&M===0&&s===1?(p=0,l=E-1):l===E-1&&W.current>0&&(p+=W.current*-1-g*s,X.current=!0),B.current&&(!Y()&&P.removeClass(B.current,"p-items-hidden"),de(p),B.current.style.transition="transform 500ms ease 0s"),_e(l),d(p)},Ye=function(){if(B.current&&J.current){for(var s=window.innerWidth,l={numVisible:t.numVisible,numScroll:t.numScroll},p=0;p<J.current.length;p++){var N=J.current[p];parseInt(N.breakpoint,10)>=s&&(l=N)}if(g!==l.numScroll){var _=Math.floor(D*g/l.numScroll),y=l.numScroll*_*-1;k&&(y-=l.numVisible),d(y),K(l.numScroll),_e(_)}u!==l.numVisible&&w(l.numVisible)}},xe=function(s,l){(re||D!==0)&&te(1,l),le.current=!1,s.cancelable&&s.preventDefault()},ge=function(s,l){(re||D<E-1)&&te(-1,l),le.current=!1,s.cancelable&&s.preventDefault()},at=function(s,l){l>D?ge(s,l):l<D&&xe(s,l)},rt=function(s){B.current&&s.propertyName==="transform"&&(P.addClass(B.current,"p-items-hidden"),B.current.style.transition="",(M===0||M===E-1)&&k&&de(b))},nt=function(s){var l=s.changedTouches[0];ve.current={x:l.pageX,y:l.pageY}},st=function(s){s.cancelable&&s.preventDefault()},ot=function(s){var l=s.changedTouches[0];ee?Pe(s,l.pageY-ve.current.y):Pe(s,l.pageX-ve.current.x)},Pe=function(s,l){Math.abs(l)>Je.current&&(l<0?ge(s):xe(s))},lt=function(s){switch(s.code){case"ArrowRight":it();break;case"ArrowLeft":ct();break;case"Home":ut(),s.preventDefault();break;case"End":dt(),s.preventDefault();break;case"ArrowUp":case"ArrowDown":s.preventDefault();break;case"Tab":pt();break}},it=function(){var s=ae(P.find(U.current,'[data-pc-section="indicator"]')),l=ce();ue(l,l+1===s.length?s.length-1:l+1)},ct=function(){var s=ce();ue(s,s-1<=0?0:s-1)},ut=function(){var s=ce();ue(s,0)},dt=function(){var s=ae(P.find(U.current,'[data-pc-section="indicator"]r')),l=ce();ue(l,s.length-1)},pt=function(){var s=ae(P.find(U.current,'[data-pc-section="indicator"]')),l=s.findIndex(function(_){return P.getAttribute(_,"data-p-highlight")===!0}),p=P.findSingle(U.current,'[data-pc-section="indicator"] > button[tabindex="0"]'),N=s.findIndex(function(_){return _===p.parentElement});s[N].children[0].tabIndex="-1",s[l].children[0].tabIndex="0"},ce=function(){var s=ae(P.find(U.current,'[data-pc-section="indicator"]')),l=P.findSingle(U.current,'[data-pc-section="indicator"] > button[tabindex="0"]');return s.findIndex(function(p){return p===l.parentElement})},ue=function(s,l){var p=ae(P.find(U.current,'[data-pc-section="indicator"]'));p[s].children[0].tabIndex="-1",p[l].children[0].tabIndex="0",p[l].children[0].focus()},Re=function(){t.autoplayInterval>0&&(he.current=setInterval(function(){M===E-1?te(-1,0):te(-1,M+1)},t.autoplayInterval))},be=function(){he.current&&clearInterval(he.current)},mt=function(){Z.current||(Z.current=P.createInlineStyle(r&&r.nonce||je.nonce,r&&r.styleContainer));var s=`
            .p-carousel[`.concat(ie.current,`] .p-carousel-item {
                flex: 1 0 `).concat(100/u,`%
            }
        `);if(t.responsiveOptions){var l=Oe.localeComparator(r&&r.locale||je.locale);J.current=ae(t.responsiveOptions),J.current.sort(function(_,y){var C=_.breakpoint,T=y.breakpoint;return Oe.sort(C,T,-1,l,r&&r.nullSortOrder||je.nullSortOrder)});for(var p=0;p<J.current.length;p++){var N=J.current[p];s+=`
                    @media screen and (max-width: `.concat(N.breakpoint,`) {
                        .p-carousel[`).concat(ie.current,`] .p-carousel-item {
                            flex: 1 0 `).concat(100/N.numVisible,`%
                        }
                    }
                `)}}Z.current.innerHTML=s},ft=function(){Z.current=P.removeInlineStyle(Z.current)},de=function(s){B.current&&(B.current.style.transform=ee?"translate3d(0, ".concat(s*(100/u),"%, 0)"):"translate3d(".concat(s*(100/u),"%, 0, 0)"))},_e=function(s){!Ae&&q(s),t.onPageChange&&t.onPageChange({page:s})};i.useImperativeHandle(o,function(){return{props:t,startAutoplay:Re,stopAutoplay:be,getElement:function(){return z.current}}}),Jt(function(){z.current&&(ie.current=Qt(),z.current.setAttribute(ie.current,"")),Z.current||(Ye(),de(b),tt())}),Gt(function(){var m=!1,s=b;if(mt(),t.autoplayInterval&&be(),Ge!==g||Qe!==u||t.value&&Fe&&Fe.length!==t.value.length){W.current=(t.value.length-u)%g;var l=D;E!==0&&l>=E&&(l=E-1,_e(l),m=!0),s=l*g*-1,k&&(s-=u),l===E-1&&W.current>0?(s+=-1*W.current+g,X.current=!0):X.current=!1,s!==b&&(d(s),m=!0),de(s)}return k&&(M===0?s=-1*u:s===0&&(s=-1*t.value.length,W.current>0&&(X.current=!0)),s!==b&&(d(s),m=!0)),ye!==t.page&&(t.page>ye&&t.page<=E-1?te(-1,t.page):t.page<ye&&te(1,t.page)),!m&&Le&&Re(),function(){t.autoplayInterval&&be(),ft()}});var vt=function(s){return V("aria")?V("aria").slideNumber.replace(/{slideNumber}/g,s):void 0},ht=function(){if(t.value&&t.value.length){var s=null,l=null;if(k){var p=null;p=t.value.slice(-1*u),s=p.map(function(_,y){var C=b*-1===t.value.length+u,T=y===0,O=y===p.length-1,ne=y+"_scloned";return i.createElement(fe,{key:ne,className:"p-carousel-item-cloned",template:t.itemTemplate,item:_,active:C,start:T,end:O,ptm:x,cx:n})}),p=t.value.slice(0,u),l=p.map(function(_,y){var C=b===0,T=y===0,O=y===p.length-1,ne=y+"_fcloned";return i.createElement(fe,{key:ne,className:"p-carousel-item-cloned",template:t.itemTemplate,item:_,active:C,start:T,end:O,ptm:x,cx:n})})}var N=t.value.map(function(_,y){var C=k?-1*(b+u):b*-1,T=C+u-1,O=C<=y&&T>=y,ne=C===y,Ft=T===y,Lt=C>y||T<y?!0:void 0,At=vt(y),Yt=V("aria")?V("aria").slide:void 0;return i.createElement(fe,{key:y,template:t.itemTemplate,item:_,active:O,start:ne,ariaHidden:Lt,ariaLabel:At,ariaRoledescription:Yt,role:"group",end:Ft,ptm:x,cx:n})});return i.createElement(i.Fragment,null,s,N,l)}},yt=function(){if(t.header){var s=F({className:n("header")},x("header"));return i.createElement("div",s,t.header)}return null},xt=function(){if(t.footer){var s=F({className:n("footer")},x("footer"));return i.createElement("div",s,t.footer)}return null},gt=function(){var s=ht(),l=ee?t.verticalViewPortHeight:"auto",p=bt(),N=_t(),_=F({className:n("itemsContent"),style:h("itemsContent",{height:l}),onTouchStart:function(O){return nt(O)},onTouchMove:function(O){return st(O)},onTouchEnd:function(O){return ot(O)}},x("itemsContent")),y=F({className:I(t.containerClassName,n("container")),"aria-live":le.current?"polite":"off"},x("container")),C=F({className:n("itemsContainer"),onTransitionEnd:rt},x("itemsContainer"));return i.createElement("div",y,p,i.createElement("div",_,i.createElement("div",Me({ref:B},C),s)),N)},bt=function(){if(t.showNavigators){var s=(!re||t.value&&t.value.length<u)&&D===0,l=F({className:n("previousButtonIcon")},x("previousButtonIcon")),p=ee?t.prevIcon||i.createElement(va,l):t.prevIcon||i.createElement(ua,l),N=De.getJSXIcon(p,Ve({},l),{props:t}),_=F({type:"button",className:n("previousButton",{isDisabled:s}),onClick:function(C){return xe(C)},disabled:s,"aria-label":V("aria")?V("aria").previousPageLabel:void 0,"data-pc-group-section":"navigator"},x("previousButton"));return i.createElement("button",_,N,i.createElement(we,null))}return null},_t=function(){if(t.showNavigators){var s=(!re||t.value&&t.value.length<u)&&(D===E-1||E===0),l=F({className:n("nextButtonIcon")},x("nextButtonIcon")),p=ee?t.nextIcon||i.createElement(fa,l):t.nextIcon||i.createElement(na,l),N=De.getJSXIcon(p,Ve({},l),{props:t}),_=F({type:"button",className:n("nextButton",{isDisabled:s}),onClick:function(C){return ge(C)},disabled:s,"aria-label":V("aria")?V("aria").nextPageLabel:void 0,"data-pc-group-section":"navigator"},x("nextButton"));return i.createElement("button",_,N,i.createElement(we,null))}return null},wt=function(s){return V("aria")?V("aria").pageLabel.replace(/{page}/g,s):void 0},jt=function(s){var l=D===s,p=function(T){return x(T,{context:{active:l}})},N="carousel-indicator-"+s,_=F({key:N,className:n("indicator",{isActive:l}),"data-p-highlight":l},p("indicator")),y=F({type:"button",className:n("indicatorButton"),tabIndex:D===s?"0":"-1",onClick:function(T){return at(T,s)},"aria-label":wt(s+1),"aria-current":D===s?"page":void 0},p("indicatorButton"));return i.createElement("li",_,i.createElement("button",y,i.createElement(we,null)))},Nt=function(){if(t.showIndicators){for(var s=[],l=0;l<E;l++)s.push(jt(l));var p=F({ref:U,className:I(t.indicatorsContentClassName,n("indicators")),onKeyDown:lt},x("indicators"));return i.createElement("ul",p,s)}return null},St=gt(),Ct=Nt(),It=yt(),Mt=xt(),Tt=F({id:t.id,ref:z,className:I(t.className,n("root",{isVertical:ee})),style:t.style,role:"region"},me.getOtherProps(t),x("root")),Et=F({className:I(t.contentClassName,n("content"))},x("content"));return i.createElement("div",Tt,It,i.createElement("div",Et,St,Ct),Mt)}));fe.displayName="CarouselItem";Xe.displayName="Carousel";const tr=()=>{const e=Ee(),o=Ce(He),[r,t]=i.useState([]),[f,v]=i.useState(null),[u,w]=i.useState([]),[A,L]=i.useState([]),[g,K]=i.useState(!1),H=async()=>{const d=await Zt();e(ea(d.status===200?d.data.data:null))},$=async()=>{var M,q,c,x;const d=await ta(),S=await aa(),R=await ra();t(d.status===200?d.data.data:[]),S.status===200&&((q=(M=S==null?void 0:S.data)==null?void 0:M.data)!=null&&q.holiday_databases)?(w(S.data.data.holiday_databases.filter(n=>n.date===j().format("YYYY-MM-DD"))),L((x=(c=S==null?void 0:S.data)==null?void 0:c.data)==null?void 0:x.holiday_databases.filter(n=>n.date!=j().format("YYYY-MM-DD")))):(w([]),L([])),v(R.status===200?R.data.data[0]:null)},b=d=>{if(d.leave_calendar_from===1)return"Jan-Dec";if(d.leave_calendar_from===2)return"Apr-Mar";{const S=j(d.custom_month,"M").format("MMM"),R=j(d.custom_month,"M").add(11,"months").format("MMM");return`${S}-${R}`}};return i.useEffect(()=>{$()},[]),i.useEffect(()=>{o||H()},[o]),a.jsxs("div",{className:"m-auto grid w-full gap-3 md:grid-cols-8",children:[a.jsxs(Ne,{className:"flex h-full w-full flex-col overflow-hidden md:col-span-6 md:row-span-2",children:[a.jsxs("p",{className:"p-3 text-lg text-[#37B3E0]",children:[a.jsx("span",{children:"Leave Balance Status "})," ",a.jsx("span",{className:"text-900 text-sm",children:o?b(o):"---"})]}),(r==null?void 0:r.length)>0&&a.jsx(Xe,{circular:!0,showIndicators:!0,value:r,numScroll:1,numVisible:4,itemTemplate:_a}),(r==null?void 0:r.length)===0&&a.jsx(ca,{className:"mx-3",severity:"info",text:"No leaves have been assigned to you yet!"}),a.jsx(ja,{})]}),a.jsxs(Ne,{className:"flex-col gap-3 p-3 md:col-span-2",children:[a.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[a.jsx("p",{name:"card-heading",className:"w-full text-center text-lg text-[#37B3E0]",children:"Holidays"}),a.jsxs("div",{className:"relative mt-[60px] flex flex-col items-center justify-center",children:[a.jsxs("div",{className:"z-50 flex w-[60%] flex-col rounded bg-[#37B3E0] p-2",children:[a.jsx("p",{className:"text-center text-sm text-white",children:"Today"}),a.jsx("p",{className:"text-center text-xs text-white",children:j().format("dddd, MMMM DD")})]}),a.jsx("img",{className:"absolute bottom-9",width:100,height:75,src:ba})]})]}),a.jsxs("div",{className:"flex w-full flex-col gap-3",children:[(u==null?void 0:u.length)>0&&u.map(d=>a.jsxs("div",{className:"flex w-full flex-col rounded bg-[#FAFBFD] p-3",children:[a.jsx("p",{className:"text-sm font-bold",children:d.name}),a.jsx("p",{className:"text-xs",children:j(d.date).format("MMMM DD, YYYY | dddd")})]},`today-holidays-${d.name}`)),(u==null?void 0:u.length)===0&&a.jsx("div",{className:"flex w-full flex-col rounded bg-[#FAFBFD] p-3",children:a.jsx("p",{className:"text-center text-sm",children:"No holidays today!"})})]}),a.jsx("div",{className:"mt-auto w-full text-center text-sm",children:a.jsx("span",{className:"cursor-pointer text-gray-500 hover:text-gray-900",name:"card-heading",onClick:()=>K(!0),children:"View All"})}),a.jsx(Na,{visible:g,onHide:()=>K(!1),holidays:{today:u,upcoming:A}})]}),a.jsxs(Ne,{className:" flex-col p-3 md:col-span-2",children:[a.jsxs("div",{className:"mb-2 flex flex-col",children:[a.jsx("p",{name:"card-heading",className:"w-full text-center text-lg text-[#37B3E0]",children:"Leave Requests Status"}),a.jsx("p",{name:"card-heading",className:"w-full text-center text-sm",children:o?b(o):"---"})]}),a.jsxs("div",{className:"flex w-full flex-col gap-3",children:[a.jsxs("div",{className:"flex w-full justify-between gap-3 p-2",children:[a.jsx("img",{className:"h-[50px] w-[50px] self-center",src:ga}),a.jsxs("div",{className:"flex flex-col items-end justify-center",children:[a.jsx("p",{className:"text-center text-sm",children:(f==null?void 0:f.total_leave_records)||"N/A"}),a.jsx("p",{className:"text-xs",children:"Leaves Requested"})]})]}),a.jsxs("div",{className:"flex w-full justify-between gap-3 p-2",children:[a.jsx("img",{className:"h-[50px] w-[50px] self-center",src:ha}),a.jsxs("div",{className:"flex flex-col items-end justify-center",children:[a.jsx("p",{className:"text-center text-sm",children:(f==null?void 0:f.approved_count)||"N/A"}),a.jsx("p",{className:"text-xs",children:"Leaves Approved"})]})]}),a.jsxs("div",{className:"flex w-full justify-between gap-3 p-2",children:[a.jsx("img",{className:"h-[50px] w-[50px] self-center",src:ya}),a.jsxs("div",{className:"flex flex-col items-end justify-center",children:[a.jsx("p",{className:"text-center text-sm",children:(f==null?void 0:f.pending_count)||"N/A"}),a.jsx("p",{className:"text-xs",children:"Leaves Pending"})]})]}),a.jsxs("div",{className:"flex w-full justify-between gap-3 p-2",children:[a.jsx("img",{className:"h-[50px] w-[50px] self-center",src:xa}),a.jsxs("div",{className:"flex flex-col items-end justify-center",children:[a.jsx("p",{className:"text-center text-sm",children:(f==null?void 0:f.rejected_count)||"N/A"}),a.jsx("p",{className:"text-xs",children:"Leaves Rejected"})]})]})]})]})]})};export{tr as default};
